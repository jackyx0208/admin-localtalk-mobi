{"ast":null,"code":"import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{noCase}from'change-case';import{useRef,useState}from'react';import{Link as RouterLink}from'react-router-dom';import{Icon}from'@iconify/react';import bellFill from'@iconify/icons-eva/bell-fill';import clockFill from'@iconify/icons-eva/clock-fill';import doneAllFill from'@iconify/icons-eva/done-all-fill';// material\nimport{alpha}from'@material-ui/core/styles';import{Box,List,Badge,Button,Avatar,Tooltip,Divider,Typography,ListItemText,ListSubheader,ListItemAvatar,ListItemButton}from'@material-ui/core';// utils\nimport mockData from'../../utils/mock-data';import{fToNow}from'../../utils/formatTime';// components\nimport Scrollbar from'../../components/Scrollbar';import MenuPopover from'../../components/MenuPopover';import{MIconButton}from'../../components/@material-extend';// ----------------------------------------------------------------------\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TITLES=['Your order is placed','Sylvan King','You have new message','You have new mail','Delivery processing'];var DESCRIPTIONS=['waiting for shipping','answered to your comment on the Minimal','5 unread messages','sent from Guido Padberg','Your order is being shipped'];var TYPES=['order_placed','friend_interactive','chat_message','mail','order_shipped'];var AVATARS=[null,mockData.image.avatar(2),null,null,null];var UNREADS=[true,true,false,false,false];var MOCK_NOTIFICATIONS=_toConsumableArray(Array(5)).map(function(_,index){return{id:mockData.id(index),title:TITLES[index],description:DESCRIPTIONS[index],avatar:AVATARS[index],type:TYPES[index],createdAt:mockData.time(index),isUnRead:UNREADS[index]};});// ----------------------------------------------------------------------\nfunction renderContent(notification){var title=/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle2\",children:[notification.title,/*#__PURE__*/_jsxs(Typography,{component:\"span\",variant:\"body2\",sx:{color:'text.secondary'},children:[\"\\xA0 \",noCase(notification.description)]})]});if(notification.type==='order_placed'){return{avatar:/*#__PURE__*/_jsx(\"img\",{alt:notification.title,src:\"/static/icons/ic_notification_package.svg\"}),title:title};}if(notification.type==='order_shipped'){return{avatar:/*#__PURE__*/_jsx(\"img\",{alt:notification.title,src:\"/static/icons/ic_notification_shipping.svg\"}),title:title};}if(notification.type==='mail'){return{avatar:/*#__PURE__*/_jsx(\"img\",{alt:notification.title,src:\"/static/icons/ic_notification_mail.svg\"}),title:title};}if(notification.type==='chat_message'){return{avatar:/*#__PURE__*/_jsx(\"img\",{alt:notification.title,src:\"/static/icons/ic_notification_chat.svg\"}),title:title};}return{avatar:/*#__PURE__*/_jsx(\"img\",{alt:notification.title,src:notification.avatar}),title:title};}function NotificationItem(_ref){var notification=_ref.notification;var _renderContent=renderContent(notification),avatar=_renderContent.avatar,title=_renderContent.title;return/*#__PURE__*/_jsxs(ListItemButton,{to:\"#\",disableGutters:true,component:RouterLink,sx:_objectSpread({py:1.5,px:2.5,mt:'1px'},notification.isUnRead&&{bgcolor:'action.selected'}),children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'background.neutral'},children:avatar})}),/*#__PURE__*/_jsx(ListItemText,{primary:title,secondary:/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{mt:0.5,display:'flex',alignItems:'center',color:'text.disabled'},children:[/*#__PURE__*/_jsx(Box,{component:Icon,icon:clockFill,sx:{mr:0.5,width:16,height:16}}),fToNow(notification.createdAt)]})})]});}export default function NotificationsPopover(){var anchorRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(MOCK_NOTIFICATIONS),_useState4=_slicedToArray(_useState3,2),notifications=_useState4[0],setNotifications=_useState4[1];var totalUnRead=notifications.filter(function(item){return item.isUnRead===true;}).length;var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleMarkAllAsRead=function handleMarkAllAsRead(){setNotifications(notifications.map(function(notification){return _objectSpread(_objectSpread({},notification),{},{isUnRead:false});}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MIconButton,{ref:anchorRef,size:\"large\",color:open?'primary':'default',onClick:handleOpen,sx:_objectSpread({},open&&{bgcolor:function bgcolor(theme){return alpha(theme.palette.primary.main,theme.palette.action.focusOpacity);}}),children:/*#__PURE__*/_jsx(Badge,{badgeContent:totalUnRead,color:\"error\",children:/*#__PURE__*/_jsx(Icon,{icon:bellFill,width:20,height:20})})}),/*#__PURE__*/_jsxs(MenuPopover,{open:open,onClose:handleClose,anchorEl:anchorRef.current,sx:{width:360},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',py:2,px:2.5},children:[/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:\"Notifications\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{color:'text.secondary'},children:[\"You have \",totalUnRead,\" unread messages\"]})]}),totalUnRead>0&&/*#__PURE__*/_jsx(Tooltip,{title:\" Mark all as read\",children:/*#__PURE__*/_jsx(MIconButton,{color:\"primary\",onClick:handleMarkAllAsRead,children:/*#__PURE__*/_jsx(Icon,{icon:doneAllFill,width:20,height:20})})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Scrollbar,{sx:{height:{xs:340,sm:'auto'}},children:[/*#__PURE__*/_jsx(List,{disablePadding:true,subheader:/*#__PURE__*/_jsx(ListSubheader,{disableSticky:true,sx:{py:1,px:2.5,typography:'overline'},children:\"New\"}),children:notifications.slice(0,2).map(function(notification){return/*#__PURE__*/_jsx(NotificationItem,{notification:notification},notification.id);})}),/*#__PURE__*/_jsx(List,{disablePadding:true,subheader:/*#__PURE__*/_jsx(ListSubheader,{disableSticky:true,sx:{py:1,px:2.5,typography:'overline'},children:\"Before that\"}),children:notifications.slice(2,5).map(function(notification){return/*#__PURE__*/_jsx(NotificationItem,{notification:notification},notification.id);})})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Box,{sx:{p:1},children:/*#__PURE__*/_jsx(Button,{fullWidth:true,disableRipple:true,component:RouterLink,to:\"#\",children:\"View All\"})})]})]});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/layouts/dashboard/NotificationsPopover.js"],"names":["noCase","useRef","useState","Link","RouterLink","Icon","bellFill","clockFill","doneAllFill","alpha","Box","List","Badge","Button","Avatar","Tooltip","Divider","Typography","ListItemText","ListSubheader","ListItemAvatar","ListItemButton","mockData","fToNow","Scrollbar","MenuPopover","MIconButton","TITLES","DESCRIPTIONS","TYPES","AVATARS","image","avatar","UNREADS","MOCK_NOTIFICATIONS","Array","map","_","index","id","title","description","type","createdAt","time","isUnRead","renderContent","notification","color","NotificationItem","py","px","mt","bgcolor","display","alignItems","mr","width","height","NotificationsPopover","anchorRef","open","setOpen","notifications","setNotifications","totalUnRead","filter","item","length","handleOpen","handleClose","handleMarkAllAsRead","theme","palette","primary","main","action","focusOpacity","current","flexGrow","xs","sm","typography","slice","p"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { noCase } from 'change-case';\r\nimport { useRef, useState } from 'react';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { Icon } from '@iconify/react';\r\nimport bellFill from '@iconify/icons-eva/bell-fill';\r\nimport clockFill from '@iconify/icons-eva/clock-fill';\r\nimport doneAllFill from '@iconify/icons-eva/done-all-fill';\r\n// material\r\nimport { alpha } from '@material-ui/core/styles';\r\nimport {\r\n  Box,\r\n  List,\r\n  Badge,\r\n  Button,\r\n  Avatar,\r\n  Tooltip,\r\n  Divider,\r\n  Typography,\r\n  ListItemText,\r\n  ListSubheader,\r\n  ListItemAvatar,\r\n  ListItemButton\r\n} from '@material-ui/core';\r\n// utils\r\nimport mockData from '../../utils/mock-data';\r\nimport { fToNow } from '../../utils/formatTime';\r\n// components\r\nimport Scrollbar from '../../components/Scrollbar';\r\nimport MenuPopover from '../../components/MenuPopover';\r\nimport { MIconButton } from '../../components/@material-extend';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst TITLES = [\r\n  'Your order is placed',\r\n  'Sylvan King',\r\n  'You have new message',\r\n  'You have new mail',\r\n  'Delivery processing'\r\n];\r\n\r\nconst DESCRIPTIONS = [\r\n  'waiting for shipping',\r\n  'answered to your comment on the Minimal',\r\n  '5 unread messages',\r\n  'sent from Guido Padberg',\r\n  'Your order is being shipped'\r\n];\r\n\r\nconst TYPES = ['order_placed', 'friend_interactive', 'chat_message', 'mail', 'order_shipped'];\r\n\r\nconst AVATARS = [null, mockData.image.avatar(2), null, null, null];\r\n\r\nconst UNREADS = [true, true, false, false, false];\r\n\r\nconst MOCK_NOTIFICATIONS = [...Array(5)].map((_, index) => ({\r\n  id: mockData.id(index),\r\n  title: TITLES[index],\r\n  description: DESCRIPTIONS[index],\r\n  avatar: AVATARS[index],\r\n  type: TYPES[index],\r\n  createdAt: mockData.time(index),\r\n  isUnRead: UNREADS[index]\r\n}));\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction renderContent(notification) {\r\n  const title = (\r\n    <Typography variant=\"subtitle2\">\r\n      {notification.title}\r\n      <Typography component=\"span\" variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n        &nbsp; {noCase(notification.description)}\r\n      </Typography>\r\n    </Typography>\r\n  );\r\n\r\n  if (notification.type === 'order_placed') {\r\n    return {\r\n      avatar: <img alt={notification.title} src=\"/static/icons/ic_notification_package.svg\" />,\r\n      title\r\n    };\r\n  }\r\n  if (notification.type === 'order_shipped') {\r\n    return {\r\n      avatar: <img alt={notification.title} src=\"/static/icons/ic_notification_shipping.svg\" />,\r\n      title\r\n    };\r\n  }\r\n  if (notification.type === 'mail') {\r\n    return {\r\n      avatar: <img alt={notification.title} src=\"/static/icons/ic_notification_mail.svg\" />,\r\n      title\r\n    };\r\n  }\r\n  if (notification.type === 'chat_message') {\r\n    return {\r\n      avatar: <img alt={notification.title} src=\"/static/icons/ic_notification_chat.svg\" />,\r\n      title\r\n    };\r\n  }\r\n  return {\r\n    avatar: <img alt={notification.title} src={notification.avatar} />,\r\n    title\r\n  };\r\n}\r\n\r\nNotificationItem.propTypes = {\r\n  notification: PropTypes.object.isRequired\r\n};\r\n\r\nfunction NotificationItem({ notification }) {\r\n  const { avatar, title } = renderContent(notification);\r\n\r\n  return (\r\n    <ListItemButton\r\n      to=\"#\"\r\n      disableGutters\r\n      component={RouterLink}\r\n      sx={{\r\n        py: 1.5,\r\n        px: 2.5,\r\n        mt: '1px',\r\n        ...(notification.isUnRead && {\r\n          bgcolor: 'action.selected'\r\n        })\r\n      }}\r\n    >\r\n      <ListItemAvatar>\r\n        <Avatar sx={{ bgcolor: 'background.neutral' }}>{avatar}</Avatar>\r\n      </ListItemAvatar>\r\n      <ListItemText\r\n        primary={title}\r\n        secondary={\r\n          <Typography\r\n            variant=\"caption\"\r\n            sx={{\r\n              mt: 0.5,\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              color: 'text.disabled'\r\n            }}\r\n          >\r\n            <Box component={Icon} icon={clockFill} sx={{ mr: 0.5, width: 16, height: 16 }} />\r\n            {fToNow(notification.createdAt)}\r\n          </Typography>\r\n        }\r\n      />\r\n    </ListItemButton>\r\n  );\r\n}\r\n\r\nexport default function NotificationsPopover() {\r\n  const anchorRef = useRef(null);\r\n  const [open, setOpen] = useState(false);\r\n  const [notifications, setNotifications] = useState(MOCK_NOTIFICATIONS);\r\n  const totalUnRead = notifications.filter((item) => item.isUnRead === true).length;\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleMarkAllAsRead = () => {\r\n    setNotifications(\r\n      notifications.map((notification) => ({\r\n        ...notification,\r\n        isUnRead: false\r\n      }))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MIconButton\r\n        ref={anchorRef}\r\n        size=\"large\"\r\n        color={open ? 'primary' : 'default'}\r\n        onClick={handleOpen}\r\n        sx={{\r\n          ...(open && {\r\n            bgcolor: (theme) => alpha(theme.palette.primary.main, theme.palette.action.focusOpacity)\r\n          })\r\n        }}\r\n      >\r\n        <Badge badgeContent={totalUnRead} color=\"error\">\r\n          <Icon icon={bellFill} width={20} height={20} />\r\n        </Badge>\r\n      </MIconButton>\r\n\r\n      <MenuPopover open={open} onClose={handleClose} anchorEl={anchorRef.current} sx={{ width: 360 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', py: 2, px: 2.5 }}>\r\n          <Box sx={{ flexGrow: 1 }}>\r\n            <Typography variant=\"subtitle1\">Notifications</Typography>\r\n            <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n              You have {totalUnRead} unread messages\r\n            </Typography>\r\n          </Box>\r\n\r\n          {totalUnRead > 0 && (\r\n            <Tooltip title=\" Mark all as read\">\r\n              <MIconButton color=\"primary\" onClick={handleMarkAllAsRead}>\r\n                <Icon icon={doneAllFill} width={20} height={20} />\r\n              </MIconButton>\r\n            </Tooltip>\r\n          )}\r\n        </Box>\r\n\r\n        <Divider />\r\n\r\n        <Scrollbar sx={{ height: { xs: 340, sm: 'auto' } }}>\r\n          <List\r\n            disablePadding\r\n            subheader={\r\n              <ListSubheader disableSticky sx={{ py: 1, px: 2.5, typography: 'overline' }}>\r\n                New\r\n              </ListSubheader>\r\n            }\r\n          >\r\n            {notifications.slice(0, 2).map((notification) => (\r\n              <NotificationItem key={notification.id} notification={notification} />\r\n            ))}\r\n          </List>\r\n\r\n          <List\r\n            disablePadding\r\n            subheader={\r\n              <ListSubheader disableSticky sx={{ py: 1, px: 2.5, typography: 'overline' }}>\r\n                Before that\r\n              </ListSubheader>\r\n            }\r\n          >\r\n            {notifications.slice(2, 5).map((notification) => (\r\n              <NotificationItem key={notification.id} notification={notification} />\r\n            ))}\r\n          </List>\r\n        </Scrollbar>\r\n\r\n        <Divider />\r\n\r\n        <Box sx={{ p: 1 }}>\r\n          <Button fullWidth disableRipple component={RouterLink} to=\"#\">\r\n            View All\r\n          </Button>\r\n        </Box>\r\n      </MenuPopover>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}