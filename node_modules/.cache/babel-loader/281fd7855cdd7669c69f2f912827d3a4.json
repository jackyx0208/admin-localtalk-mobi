{"ast":null,"code":"import jwtDecode from'jwt-decode';import{verify,sign}from'jsonwebtoken';//\nimport axios from'./axios';// ----------------------------------------------------------------------\nvar isValidToken=function isValidToken(accessToken){if(!accessToken){return false;}var decoded=jwtDecode(accessToken);var currentTime=Date.now()/1000;return decoded.exp>currentTime;};//  const handleTokenExpired = (exp) => {\n//   let expiredTimer;\n//   window.clearTimeout(expiredTimer);\n//   const currentTime = Date.now();\n//   const timeLeft = exp * 1000 - currentTime;\n//   console.log(timeLeft);\n//   expiredTimer = window.setTimeout(() => {\n//     console.log('expired');\n//     // You can do what ever you want here, like show a notification\n//   }, timeLeft);\n// };\nvar setSession=function setSession(accessToken){if(accessToken){localStorage.setItem('accessToken',accessToken);axios.defaults.headers.common.Authorization=\"Bearer \".concat(accessToken);// This function below will handle when token is expired\n// const { exp } = jwtDecode(accessToken);\n// handleTokenExpired(exp);\n}else{localStorage.removeItem('accessToken');delete axios.defaults.headers.common.Authorization;}};export{isValidToken,setSession,verify,sign};","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/utils/jwt.js"],"names":["jwtDecode","verify","sign","axios","isValidToken","accessToken","decoded","currentTime","Date","now","exp","setSession","localStorage","setItem","defaults","headers","common","Authorization","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,SAAP,KAAsB,YAAtB,CACA,OAASC,MAAT,CAAiBC,IAAjB,KAA6B,cAA7B,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CAEA;AAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,WAAD,CAAiB,CACpC,GAAI,CAACA,WAAL,CAAkB,CAChB,MAAO,MAAP,CACD,CAED,GAAMC,CAAAA,OAAO,CAAGN,SAAS,CAACK,WAAD,CAAzB,CACA,GAAME,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,GAAa,IAAjC,CAEA,MAAOH,CAAAA,OAAO,CAACI,GAAR,CAAcH,WAArB,CACD,CATD,CAWA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACN,WAAD,CAAiB,CAClC,GAAIA,WAAJ,CAAiB,CACfO,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCR,WAApC,EACAF,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAA9B,kBAAwDZ,WAAxD,EACA;AACA;AACA;AACD,CAND,IAMO,CACLO,YAAY,CAACM,UAAb,CAAwB,aAAxB,EACA,MAAOf,CAAAA,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8BC,aAArC,CACD,CACF,CAXD,CAaA,OAASb,YAAT,CAAuBO,UAAvB,CAAmCV,MAAnC,CAA2CC,IAA3C","sourcesContent":["import jwtDecode from 'jwt-decode';\r\nimport { verify, sign } from 'jsonwebtoken';\r\n//\r\nimport axios from './axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst isValidToken = (accessToken) => {\r\n  if (!accessToken) {\r\n    return false;\r\n  }\r\n\r\n  const decoded = jwtDecode(accessToken);\r\n  const currentTime = Date.now() / 1000;\r\n\r\n  return decoded.exp > currentTime;\r\n};\r\n\r\n//  const handleTokenExpired = (exp) => {\r\n//   let expiredTimer;\r\n\r\n//   window.clearTimeout(expiredTimer);\r\n//   const currentTime = Date.now();\r\n//   const timeLeft = exp * 1000 - currentTime;\r\n//   console.log(timeLeft);\r\n//   expiredTimer = window.setTimeout(() => {\r\n//     console.log('expired');\r\n//     // You can do what ever you want here, like show a notification\r\n//   }, timeLeft);\r\n// };\r\n\r\nconst setSession = (accessToken) => {\r\n  if (accessToken) {\r\n    localStorage.setItem('accessToken', accessToken);\r\n    axios.defaults.headers.common.Authorization = `Bearer ${accessToken}`;\r\n    // This function below will handle when token is expired\r\n    // const { exp } = jwtDecode(accessToken);\r\n    // handleTokenExpired(exp);\r\n  } else {\r\n    localStorage.removeItem('accessToken');\r\n    delete axios.defaults.headers.common.Authorization;\r\n  }\r\n};\r\n\r\nexport { isValidToken, setSession, verify, sign };\r\n"]},"metadata":{},"sourceType":"module"}