{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createSlice}from'@reduxjs/toolkit';import{omit}from'lodash';// utils\nimport axios from'../../utils/axios';// ----------------------------------------------------------------------\nfunction objFromArray(array){var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'id';return array.reduce(function(accumulator,current){accumulator[current[key]]=current;return accumulator;},{});}var initialState={isLoading:false,error:false,board:{cards:{},columns:{},columnOrder:[]}};var slice=createSlice({name:'kanban',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET BOARD\ngetBoardSuccess:function getBoardSuccess(state,action){state.isLoading=false;var board=action.payload;var cards=objFromArray(board.cards);var columns=objFromArray(board.columns);var columnOrder=board.columnOrder;state.board={cards:cards,columns:columns,columnOrder:columnOrder};},// CREATE NEW COLUMN\ncreateColumnSuccess:function createColumnSuccess(state,action){var newColumn=action.payload;state.isLoading=false;state.board.columns=_objectSpread(_objectSpread({},state.board.columns),{},_defineProperty({},newColumn.id,newColumn));state.board.columnOrder.push(newColumn.id);},persistCard:function persistCard(state,action){var columns=action.payload.columns;state.board.columns=columns;},persistColumn:function persistColumn(state,action){state.board.columnOrder=action.payload;},addTask:function addTask(state,action){var _action$payload=action.payload,card=_action$payload.card,columnId=_action$payload.columnId;state.board.cards[card.id]=card;state.board.columns[columnId].cardIds.push(card.id);},deleteTask:function deleteTask(state,action){var _action$payload2=action.payload,cardId=_action$payload2.cardId,columnId=_action$payload2.columnId;state.board.columns[columnId].cardIds=state.board.columns[columnId].cardIds.filter(function(id){return id!==cardId;});state.board.cards=omit(state.board.cards,[cardId]);},// UPDATE COLUMN\nupdateColumnSuccess:function updateColumnSuccess(state,action){var column=action.payload;state.isLoading=false;state.board.columns[column.id]=column;},// DELETE COLUMN\ndeleteColumnSuccess:function deleteColumnSuccess(state,action){var columnId=action.payload.columnId;var deletedColumn=state.board.columns[columnId];state.isLoading=false;state.board.columns=omit(state.board.columns,[columnId]);state.board.cards=omit(state.board.cards,_toConsumableArray(deletedColumn.cardIds));state.board.columnOrder=state.board.columnOrder.filter(function(c){return c!==columnId;});}}});// Reducer\nexport default slice.reducer;var actions=slice.actions;// ----------------------------------------------------------------------\nexport{actions};export function getBoard(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/kanban/board');case 4:response=_context.sent;dispatch(slice.actions.getBoardSuccess(response.data.board));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function createColumn(newColumn){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.post('/api/kanban/columns/new',newColumn);case 4:response=_context2.sent;dispatch(slice.actions.createColumnSuccess(response.data.column));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function updateColumn(columnId,updateColumn){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.post('/api/kanban/columns/update',{columnId:columnId,updateColumn:updateColumn});case 4:response=_context3.sent;dispatch(slice.actions.updateColumnSuccess(response.data.column));_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch(slice.actions.hasError(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function deleteColumn(columnId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(slice.actions.startLoading());_context4.prev=1;_context4.next=4;return axios.post('/api/kanban/columns/delete',{columnId:columnId});case 4:dispatch(slice.actions.deleteColumnSuccess({columnId:columnId}));_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](1);dispatch(slice.actions.hasError(_context4.t0));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[1,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function persistColumn(newColumnOrder){return function(dispatch){dispatch(slice.actions.persistColumn(newColumnOrder));};}// ----------------------------------------------------------------------\nexport function persistCard(columns){return function(dispatch){dispatch(slice.actions.persistCard(columns));};}// ----------------------------------------------------------------------\nexport function addTask(task){return function(dispatch){dispatch(slice.actions.addTask(task));};}// ----------------------------------------------------------------------\nexport function deleteTask(taskId){return function(dispatch){dispatch(slice.actions.deleteTask(taskId));};}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/redux/slices/kanban.js"],"names":["createSlice","omit","axios","objFromArray","array","key","reduce","accumulator","current","initialState","isLoading","error","board","cards","columns","columnOrder","slice","name","reducers","startLoading","state","hasError","action","payload","getBoardSuccess","createColumnSuccess","newColumn","id","push","persistCard","persistColumn","addTask","card","columnId","cardIds","deleteTask","cardId","filter","updateColumnSuccess","column","deleteColumnSuccess","deletedColumn","c","reducer","actions","getBoard","dispatch","get","response","data","createColumn","post","updateColumn","deleteColumn","newColumnOrder","task","taskId"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { omit } from 'lodash';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction objFromArray(array, key = 'id') {\r\n  return array.reduce((accumulator, current) => {\r\n    accumulator[current[key]] = current;\r\n    return accumulator;\r\n  }, {});\r\n}\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  board: {\r\n    cards: {},\r\n    columns: {},\r\n    columnOrder: []\r\n  }\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'kanban',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET BOARD\r\n    getBoardSuccess(state, action) {\r\n      state.isLoading = false;\r\n      const board = action.payload;\r\n      const cards = objFromArray(board.cards);\r\n      const columns = objFromArray(board.columns);\r\n      const { columnOrder } = board;\r\n      state.board = {\r\n        cards,\r\n        columns,\r\n        columnOrder\r\n      };\r\n    },\r\n\r\n    // CREATE NEW COLUMN\r\n    createColumnSuccess(state, action) {\r\n      const newColumn = action.payload;\r\n      state.isLoading = false;\r\n      state.board.columns = {\r\n        ...state.board.columns,\r\n        [newColumn.id]: newColumn\r\n      };\r\n      state.board.columnOrder.push(newColumn.id);\r\n    },\r\n\r\n    persistCard(state, action) {\r\n      const { columns } = action.payload;\r\n      state.board.columns = columns;\r\n    },\r\n\r\n    persistColumn(state, action) {\r\n      state.board.columnOrder = action.payload;\r\n    },\r\n\r\n    addTask(state, action) {\r\n      const { card, columnId } = action.payload;\r\n\r\n      state.board.cards[card.id] = card;\r\n      state.board.columns[columnId].cardIds.push(card.id);\r\n    },\r\n\r\n    deleteTask(state, action) {\r\n      const { cardId, columnId } = action.payload;\r\n\r\n      state.board.columns[columnId].cardIds = state.board.columns[columnId].cardIds.filter((id) => id !== cardId);\r\n      state.board.cards = omit(state.board.cards, [cardId]);\r\n    },\r\n\r\n    // UPDATE COLUMN\r\n    updateColumnSuccess(state, action) {\r\n      const column = action.payload;\r\n\r\n      state.isLoading = false;\r\n      state.board.columns[column.id] = column;\r\n    },\r\n\r\n    // DELETE COLUMN\r\n    deleteColumnSuccess(state, action) {\r\n      const { columnId } = action.payload;\r\n      const deletedColumn = state.board.columns[columnId];\r\n\r\n      state.isLoading = false;\r\n      state.board.columns = omit(state.board.columns, [columnId]);\r\n      state.board.cards = omit(state.board.cards, [...deletedColumn.cardIds]);\r\n      state.board.columnOrder = state.board.columnOrder.filter((c) => c !== columnId);\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\nexport const { actions } = slice;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getBoard() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/kanban/board');\r\n      dispatch(slice.actions.getBoardSuccess(response.data.board));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function createColumn(newColumn) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/kanban/columns/new', newColumn);\r\n      dispatch(slice.actions.createColumnSuccess(response.data.column));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function updateColumn(columnId, updateColumn) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/kanban/columns/update', {\r\n        columnId,\r\n        updateColumn\r\n      });\r\n      dispatch(slice.actions.updateColumnSuccess(response.data.column));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function deleteColumn(columnId) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      await axios.post('/api/kanban/columns/delete', { columnId });\r\n      dispatch(slice.actions.deleteColumnSuccess({ columnId }));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function persistColumn(newColumnOrder) {\r\n  return (dispatch) => {\r\n    dispatch(slice.actions.persistColumn(newColumnOrder));\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function persistCard(columns) {\r\n  return (dispatch) => {\r\n    dispatch(slice.actions.persistCard(columns));\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function addTask(task) {\r\n  return (dispatch) => {\r\n    dispatch(slice.actions.addTask(task));\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function deleteTask(taskId) {\r\n  return (dispatch) => {\r\n    dispatch(slice.actions.deleteTask(taskId));\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}