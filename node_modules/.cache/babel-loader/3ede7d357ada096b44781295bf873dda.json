{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';// ----------------------------------------------------------------------\nfunction objFromArray(array){var key=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'id';return array.reduce(function(accumulator,current){accumulator[current[key]]=current;return accumulator;},{});}var initialState={isLoading:false,error:false,mails:{byId:{},allIds:[]},labels:[]};var slice=createSlice({name:'mail',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET LABELS\ngetLabelsSuccess:function getLabelsSuccess(state,action){state.isLoading=false;state.labels=action.payload;},// GET MAILS\ngetMailsSuccess:function getMailsSuccess(state,action){var mails=action.payload;state.isLoading=false;state.mails.byId=objFromArray(mails);state.mails.allIds=Object.keys(state.mails.byId);},// GET MAIL\ngetMailSuccess:function getMailSuccess(state,action){var mail=action.payload;state.mails.byId[mail.id]=mail;if(!state.mails.allIds.includes(mail.id)){state.mails.allIds.push(mail.id);}}}});// Reducer\nexport default slice.reducer;// ----------------------------------------------------------------------\nexport function getLabels(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/mail/labels');case 4:response=_context.sent;dispatch(slice.actions.getLabelsSuccess(response.data.labels));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function getMails(params){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.get('/api/mail/mails',{params:params});case 4:response=_context2.sent;dispatch(slice.actions.getMailsSuccess(response.data.mails));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function getMail(mailId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.get('/api/mail/mail',{params:{mailId:mailId}});case 4:response=_context3.sent;dispatch(slice.actions.getMailSuccess(response.data.mail));_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch(slice.actions.hasError(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/redux/slices/mail.js"],"names":["createSlice","axios","objFromArray","array","key","reduce","accumulator","current","initialState","isLoading","error","mails","byId","allIds","labels","slice","name","reducers","startLoading","state","hasError","action","payload","getLabelsSuccess","getMailsSuccess","Object","keys","getMailSuccess","mail","id","includes","push","reducer","getLabels","dispatch","actions","get","response","data","getMails","params","getMail","mailId"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction objFromArray(array, key = 'id') {\r\n  return array.reduce((accumulator, current) => {\r\n    accumulator[current[key]] = current;\r\n    return accumulator;\r\n  }, {});\r\n}\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  mails: { byId: {}, allIds: [] },\r\n  labels: []\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'mail',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET LABELS\r\n    getLabelsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.labels = action.payload;\r\n    },\r\n\r\n    // GET MAILS\r\n    getMailsSuccess(state, action) {\r\n      const mails = action.payload;\r\n\r\n      state.isLoading = false;\r\n      state.mails.byId = objFromArray(mails);\r\n      state.mails.allIds = Object.keys(state.mails.byId);\r\n    },\r\n\r\n    // GET MAIL\r\n    getMailSuccess(state, action) {\r\n      const mail = action.payload;\r\n\r\n      state.mails.byId[mail.id] = mail;\r\n      if (!state.mails.allIds.includes(mail.id)) {\r\n        state.mails.allIds.push(mail.id);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getLabels() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/mail/labels');\r\n      dispatch(slice.actions.getLabelsSuccess(response.data.labels));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getMails(params) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/mail/mails', { params });\r\n      dispatch(slice.actions.getMailsSuccess(response.data.mails));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getMail(mailId) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/mail/mail', {\r\n        params: { mailId }\r\n      });\r\n      dispatch(slice.actions.getMailSuccess(response.data.mail));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}