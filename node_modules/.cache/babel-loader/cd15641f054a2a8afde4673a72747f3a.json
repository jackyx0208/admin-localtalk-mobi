{"ast":null,"code":"import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as Yup from'yup';import{Form,FormikProvider,useFormik}from'formik';// material\nimport{TextField,Alert,Stack}from'@material-ui/core';import{LoadingButton}from'@material-ui/lab';// hooks\nimport useAuth from'../../../hooks/useAuth';import useIsMountedRef from'../../../hooks/useIsMountedRef';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResetPasswordForm(_ref){var onSent=_ref.onSent,onGetEmail=_ref.onGetEmail;var _useAuth=useAuth(),resetPassword=_useAuth.resetPassword;var isMountedRef=useIsMountedRef();var ResetPasswordSchema=Yup.object().shape({email:Yup.string().email('Email must be a valid email address').required('Email is required')});var formik=useFormik({initialValues:{email:''},validationSchema:ResetPasswordSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var setErrors,setSubmitting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref2.setErrors,setSubmitting=_ref2.setSubmitting;_context.prev=1;_context.next=4;return resetPassword(values.email);case 4:if(isMountedRef.current){onSent();onGetEmail(formik.values.email);setSubmitting(false);}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.error(_context.t0);if(isMountedRef.current){setErrors({afterSubmit:_context.t0.message});setSubmitting(false);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,touched=formik.touched,isSubmitting=formik.isSubmitting,handleSubmit=formik.handleSubmit,getFieldProps=formik.getFieldProps;return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[errors.afterSubmit&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.afterSubmit}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true},getFieldProps('email')),{},{type:\"email\",label:\"Email address\",error:Boolean(touched.email&&errors.email),helperText:touched.email&&errors.email})),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmitting,children:\"Reset Password\"})]})})});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/components/authentication/reset-password/ResetPasswordForm.js"],"names":["Yup","Form","FormikProvider","useFormik","TextField","Alert","Stack","LoadingButton","useAuth","useIsMountedRef","ResetPasswordForm","onSent","onGetEmail","resetPassword","isMountedRef","ResetPasswordSchema","object","shape","email","string","required","formik","initialValues","validationSchema","onSubmit","values","setErrors","setSubmitting","current","console","error","afterSubmit","message","errors","touched","isSubmitting","handleSubmit","getFieldProps","Boolean"],"mappings":"ifAAA,MAAO,GAAKA,CAAAA,GAAZ,KAAqB,KAArB,CAEA,OAASC,IAAT,CAAeC,cAAf,CAA+BC,SAA/B,KAAgD,QAAhD,CACA;AACA,OAASC,SAAT,CAAoBC,KAApB,CAA2BC,KAA3B,KAAwC,mBAAxC,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA;AACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,CAEA;wFAOA,cAAe,SAASC,CAAAA,iBAAT,MAAmD,IAAtBC,CAAAA,MAAsB,MAAtBA,MAAsB,CAAdC,UAAc,MAAdA,UAAc,CAChE,aAA0BJ,OAAO,EAAjC,CAAQK,aAAR,UAAQA,aAAR,CACA,GAAMC,CAAAA,YAAY,CAAGL,eAAe,EAApC,CAEA,GAAMM,CAAAA,mBAAmB,CAAGf,GAAG,CAACgB,MAAJ,GAAaC,KAAb,CAAmB,CAC7CC,KAAK,CAAElB,GAAG,CAACmB,MAAJ,GAAaD,KAAb,CAAmB,qCAAnB,EAA0DE,QAA1D,CAAmE,mBAAnE,CADsC,CAAnB,CAA5B,CAIA,GAAMC,CAAAA,MAAM,CAAGlB,SAAS,CAAC,CACvBmB,aAAa,CAAE,CACbJ,KAAK,CAAE,EADM,CADQ,CAIvBK,gBAAgB,CAAER,mBAJK,CAKvBS,QAAQ,kFAAE,iBAAOC,MAAP,oJAAiBC,SAAjB,OAAiBA,SAAjB,CAA4BC,aAA5B,OAA4BA,aAA5B,uCAEAd,CAAAA,aAAa,CAACY,MAAM,CAACP,KAAR,CAFb,QAGN,GAAIJ,YAAY,CAACc,OAAjB,CAA0B,CACxBjB,MAAM,GACNC,UAAU,CAACS,MAAM,CAACI,MAAP,CAAcP,KAAf,CAAV,CACAS,aAAa,CAAC,KAAD,CAAb,CACD,CAPK,+EASNE,OAAO,CAACC,KAAR,cACA,GAAIhB,YAAY,CAACc,OAAjB,CAA0B,CACxBF,SAAS,CAAC,CAAEK,WAAW,CAAE,YAAMC,OAArB,CAAD,CAAT,CACAL,aAAa,CAAC,KAAD,CAAb,CACD,CAbK,oEAAF,wFALe,CAAD,CAAxB,CAuBA,GAAQM,CAAAA,MAAR,CAAuEZ,MAAvE,CAAQY,MAAR,CAAgBC,OAAhB,CAAuEb,MAAvE,CAAgBa,OAAhB,CAAyBC,YAAzB,CAAuEd,MAAvE,CAAyBc,YAAzB,CAAuCC,YAAvC,CAAuEf,MAAvE,CAAuCe,YAAvC,CAAqDC,aAArD,CAAuEhB,MAAvE,CAAqDgB,aAArD,CAEA,mBACE,KAAC,cAAD,EAAgB,KAAK,CAAEhB,MAAvB,uBACE,KAAC,IAAD,EAAM,YAAY,CAAC,KAAnB,CAAyB,UAAU,KAAnC,CAAoC,QAAQ,CAAEe,YAA9C,uBACE,MAAC,KAAD,EAAO,OAAO,CAAE,CAAhB,WACGH,MAAM,CAACF,WAAP,eAAsB,KAAC,KAAD,EAAO,QAAQ,CAAC,OAAhB,UAAyBE,MAAM,CAACF,WAAhC,EADzB,cAGE,KAAC,SAAD,8BACE,SAAS,KADX,EAEMM,aAAa,CAAC,OAAD,CAFnB,MAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAC,eAJR,CAKE,KAAK,CAAEC,OAAO,CAACJ,OAAO,CAAChB,KAAR,EAAiBe,MAAM,CAACf,KAAzB,CALhB,CAME,UAAU,CAAEgB,OAAO,CAAChB,KAAR,EAAiBe,MAAM,CAACf,KANtC,GAHF,cAYE,KAAC,aAAD,EAAe,SAAS,KAAxB,CAAyB,IAAI,CAAC,OAA9B,CAAsC,IAAI,CAAC,QAA3C,CAAoD,OAAO,CAAC,WAA5D,CAAwE,OAAO,CAAEiB,YAAjF,4BAZF,GADF,EADF,EADF,CAsBD","sourcesContent":["import * as Yup from 'yup';\r\nimport PropTypes from 'prop-types';\r\nimport { Form, FormikProvider, useFormik } from 'formik';\r\n// material\r\nimport { TextField, Alert, Stack } from '@material-ui/core';\r\nimport { LoadingButton } from '@material-ui/lab';\r\n// hooks\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nResetPasswordForm.propTypes = {\r\n  onSent: PropTypes.func,\r\n  onGetEmail: PropTypes.func\r\n};\r\n\r\nexport default function ResetPasswordForm({ onSent, onGetEmail }) {\r\n  const { resetPassword } = useAuth();\r\n  const isMountedRef = useIsMountedRef();\r\n\r\n  const ResetPasswordSchema = Yup.object().shape({\r\n    email: Yup.string().email('Email must be a valid email address').required('Email is required')\r\n  });\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: ''\r\n    },\r\n    validationSchema: ResetPasswordSchema,\r\n    onSubmit: async (values, { setErrors, setSubmitting }) => {\r\n      try {\r\n        await resetPassword(values.email);\r\n        if (isMountedRef.current) {\r\n          onSent();\r\n          onGetEmail(formik.values.email);\r\n          setSubmitting(false);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (isMountedRef.current) {\r\n          setErrors({ afterSubmit: error.message });\r\n          setSubmitting(false);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  const { errors, touched, isSubmitting, handleSubmit, getFieldProps } = formik;\r\n\r\n  return (\r\n    <FormikProvider value={formik}>\r\n      <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\r\n        <Stack spacing={3}>\r\n          {errors.afterSubmit && <Alert severity=\"error\">{errors.afterSubmit}</Alert>}\r\n\r\n          <TextField\r\n            fullWidth\r\n            {...getFieldProps('email')}\r\n            type=\"email\"\r\n            label=\"Email address\"\r\n            error={Boolean(touched.email && errors.email)}\r\n            helperText={touched.email && errors.email}\r\n          />\r\n\r\n          <LoadingButton fullWidth size=\"large\" type=\"submit\" variant=\"contained\" loading={isSubmitting}>\r\n            Reset Password\r\n          </LoadingButton>\r\n        </Stack>\r\n      </Form>\r\n    </FormikProvider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}