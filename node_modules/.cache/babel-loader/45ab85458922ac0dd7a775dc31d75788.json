{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{filter}from'lodash';import{Icon}from'@iconify/react';import{sentenceCase,paramCase}from'change-case';import{useState,useEffect}from'react';import{useSnackbar}from'notistack5';import plusFill from'@iconify/icons-eva/plus-fill';import{Link as RouterLink}from'react-router-dom';// material\nimport{useTheme}from'@material-ui/core/styles';import{Card,Table,Stack,Avatar,Button,Checkbox,TableRow,TableBody,TableCell,Container,Typography,TableContainer,TablePagination,Dialog,DialogTitle,DialogContent,DialogActions,Box,IconButton}from'@material-ui/core';import{Close}from'@material-ui/icons';import axios from'../../utils/axios';// redux\nimport{useDispatch,useSelector}from'../../redux/store';import{getUserList,deleteUser,getSpecialPermssionList}from'../../redux/slices/user';import{getSettingsList}from'../../redux/slices/settings';// routes\nimport{PATH_DASHBOARD}from'../../routes/paths';// hooks\nimport useSettings from'../../hooks/useSettings';import useAuth from'../../hooks/useAuth';// components\nimport Page from'../../components/Page';import Label from'../../components/Label';import Scrollbar from'../../components/Scrollbar';import SearchNotFound from'../../components/SearchNotFound';import HeaderBreadcrumbs from'../../components/HeaderBreadcrumbs';import{UserListHead,UserListToolbar,UserMoreMenu}from'../../components/_dashboard/user/list';import ConfirmDialog from'../../components/ConfirmDialog';import{serverConfig}from'../../config';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TABLE_HEAD=[{id:'email',label:'Account(Email)',alignRight:false},{id:'name',label:'Nickname',alignRight:false},{id:'role',label:'Role',alignRight:false},{id:'credit',label:'Credit',alignRight:false},{id:'balance',label:'Balance',alignRight:false},{id:'status',label:'Status',alignRight:false},{id:'max_coverage',label:'Max Coverage',alignRight:false},{id:'country',label:'Location',alignRight:false},{id:'operation',label:'Operation',alignRight:false}];// ----------------------------------------------------------------------\nfunction descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order==='desc'?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function applySortFilter(array,comparator,query){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});if(query){array=stabilizedThis.map(function(el){return el[0];});return filter(array,function(_user){if(query.filterName&&_user.name.toLowerCase().indexOf(query.filterName.toLowerCase())===-1){return false;}if(query.filterEmail&&_user.email.toLowerCase().indexOf(query.filterEmail.toLowerCase())===-1){return false;}return true;});}return stabilizedThis.map(function(el){return el[0];});}export default function UserList(){var _useSettings=useSettings(),themeStretch=_useSettings.themeStretch;var theme=useTheme();var dispatch=useDispatch();var _useAuth=useAuth(),user=_useAuth.user,logout=_useAuth.logout;var _useSelector=useSelector(function(state){return state.user;}),userList=_useSelector.userList,specialPermissionList=_useSelector.specialPermissionList;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState('asc'),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selected=_useState6[0],setSelected=_useState6[1];var _useState7=useState('role'),_useState8=_slicedToArray(_useState7,2),orderBy=_useState8[0],setOrderBy=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),filterName=_useState10[0],setFilterName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),filterEmail=_useState12[0],setFilterEmail=_useState12[1];var _useState13=useState(localStorage.getItem('userlist_rows_per_page')?Number(localStorage.getItem('userlist_rows_per_page')):25),_useState14=_slicedToArray(_useState13,2),rowsPerPage=_useState14[0],setRowsPerPage=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),openDeleteConfirm=_useState16[0],setOpenDeleteConfirm=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),handleUserId=_useState18[0],setHandleUserId=_useState18[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useSelector2=useSelector(function(state){return state.setting;}),settingsList=_useSelector2.settingsList;var parameterSettings=settingsList.find(function(settingRow){return settingRow.type==='parameter';});useEffect(function(){dispatch(getUserList());dispatch(getSpecialPermssionList());dispatch(getSettingsList());},[dispatch]);var handleCloseDeleteConfirm=function handleCloseDeleteConfirm(){setOpenDeleteConfirm(false);};var handleRequestSort=function handleRequestSort(event,property){var isAsc=orderBy===property&&order==='asc';setOrder(isAsc?'desc':'asc');setOrderBy(property);};var handleSelectAllClick=function handleSelectAllClick(event){if(event.target.checked){var newSelecteds=userList.map(function(n){return n.name;});setSelected(newSelecteds);return;}setSelected([]);};var handleClick=function handleClick(event,name){var selectedIndex=selected.indexOf(name);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,name);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(parseInt(event.target.value,10));localStorage.setItem('userlist_rows_per_page',parseInt(event.target.value,10));setPage(0);};var handleFilterByName=function handleFilterByName(event){setFilterName(event.target.value);};var handleFilterByEmail=function handleFilterByEmail(event){setFilterEmail(event.target.value);};var onDeleteUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(userId!==user._id){setHandleUserId(userId);setOpenDeleteConfirm(true);}else{enqueueSnackbar(\"You can't delete this user you logged in\",{variant:'warning'});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function onDeleteUser(_x){return _ref.apply(this,arguments);};}();var handleDeleteUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(userId!==user._id)){_context2.next=5;break;}dispatch(deleteUser(userId));_context2.next=4;return axios.delete(\"user/delete/\".concat(userId));case 4:setHandleUserId(null);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDeleteUser(_x2){return _ref2.apply(this,arguments);};}();var emptyRows=page>0?Math.max(0,(1+page)*rowsPerPage-userList.length):0;var filteredUsers=applySortFilter(userList,getComparator(order,orderBy),{filterName:filterName,filterEmail:filterEmail});var isUserNotFound=filteredUsers.length===0;return/*#__PURE__*/_jsx(Page,{title:\"User: List | Locals\",children:/*#__PURE__*/_jsxs(Container,{maxWidth:themeStretch?false:'lg',children:[/*#__PURE__*/_jsx(HeaderBreadcrumbs,{heading:\"User List\",links:[{name:'Dashboard',href:PATH_DASHBOARD.root},{name:'User',href:PATH_DASHBOARD.user.root},{name:'List'}],action:/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:RouterLink,to:PATH_DASHBOARD.user.newUser,startIcon:/*#__PURE__*/_jsx(Icon,{icon:plusFill}),children:\"New User\"})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(UserListToolbar,{numSelected:selected.length,filterName:filterName,onFilterName:handleFilterByName,filterEmail:filterEmail,onFilterEmail:handleFilterByEmail}),/*#__PURE__*/_jsx(Scrollbar,{children:/*#__PURE__*/_jsx(TableContainer,{sx:{minWidth:800},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(UserListHead,{order:order,orderBy:orderBy,headLabel:TABLE_HEAD,rowCount:userList.length,numSelected:selected.length,onRequestSort:handleRequestSort,onSelectAllClick:handleSelectAllClick}),/*#__PURE__*/_jsxs(TableBody,{children:[filteredUsers.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){var _id=row._id,email=row.email,name=row.name,avatarUrl=row.avatarUrl,role=row.role,credit=row.credit,balanceCurrency=row.balanceCurrency,balance=row.balance,status=row.status,isVerified=row.isVerified,address=row.address,coverage=row.coverage,country=row.country,online=row.online;var userSpecialPermissions=specialPermissionList.find(function(specialPermssion){return specialPermssion.userId&&paramCase(specialPermssion.userId)===_id;});var displayRole=(role==='user'||role==='s-user')&&userSpecialPermissions?'s-user':role;var isItemSelected=selected.indexOf(name)!==-1;var avatarImgSrc=\"\".concat(serverConfig.baseUrl,\"/user/img-src/\").concat(avatarUrl);var displayMaxCoverage=userSpecialPermissions&&userSpecialPermissions.max_coverage||parameterSettings&&parameterSettings.settings.default_coverage||150;return/*#__PURE__*/_jsxs(TableRow,{hover:true,tabIndex:-1,role:\"checkbox\",selected:isItemSelected,\"aria-checked\":isItemSelected,children:[/*#__PURE__*/_jsx(TableCell,{padding:\"checkbox\",children:/*#__PURE__*/_jsx(Checkbox,{checked:isItemSelected,onChange:function onChange(event){return handleClick(event,name);}})}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",align:\"left\",style:{padding:'0'},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",noWrap:true,component:RouterLink,to:\"\".concat(PATH_DASHBOARD.user.root,\"/\").concat(paramCase(_id),\"/details\"),style:{color:'unset',textDecorationLine:'none',maxWidth:'150px',display:'block'},children:email})}),/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",padding:\"none\",align:\"left\",children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",spacing:2,component:RouterLink,to:\"\".concat(PATH_DASHBOARD.user.root,\"/\").concat(paramCase(_id),\"/details\"),style:{color:'unset',textDecorationLine:'none'},children:[/*#__PURE__*/_jsx(Avatar,{alt:name,src:avatarImgSrc}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",noWrap:true,children:name})]})}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",style:{padding:'0'},children:displayRole}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[credit||0,\" %\"]}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[balanceCurrency||'$',\" \",balance||0]}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:/*#__PURE__*/_jsx(Label,{variant:theme.palette.mode==='light'?'ghost':'filled',color:!online&&'warning'||'success',children:online?'online':'offline'})}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:role!=='admin'&&displayMaxCoverage||'all'}),/*#__PURE__*/_jsx(TableCell,{align:\"left\",children:country}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsx(UserMoreMenu,{onDelete:function onDelete(){return onDeleteUser(_id);},userName:name,userId:_id})})]},_id);}),emptyRows>0&&/*#__PURE__*/_jsx(TableRow,{style:{height:53*emptyRows},children:/*#__PURE__*/_jsx(TableCell,{colSpan:6})})]}),isUserNotFound&&/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{align:\"center\",colSpan:6,sx:{py:3},children:/*#__PURE__*/_jsx(SearchNotFound,{searchQuery:\"\".concat(filterName,\", \").concat(filterEmail)})})})})]})})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[25,50,100],component:\"div\",count:userList.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]}),openDeleteConfirm&&/*#__PURE__*/_jsx(ConfirmDialog,{message:\"Are you sure you are going to delete this user?\",onConfirm:function onConfirm(){return handleDeleteUser(handleUserId);},onClose:handleCloseDeleteConfirm})]})});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/pages/dashboard/UserList.js"],"names":["filter","Icon","sentenceCase","paramCase","useState","useEffect","useSnackbar","plusFill","Link","RouterLink","useTheme","Card","Table","Stack","Avatar","Button","Checkbox","TableRow","TableBody","TableCell","Container","Typography","TableContainer","TablePagination","Dialog","DialogTitle","DialogContent","DialogActions","Box","IconButton","Close","axios","useDispatch","useSelector","getUserList","deleteUser","getSpecialPermssionList","getSettingsList","PATH_DASHBOARD","useSettings","useAuth","Page","Label","Scrollbar","SearchNotFound","HeaderBreadcrumbs","UserListHead","UserListToolbar","UserMoreMenu","ConfirmDialog","serverConfig","TABLE_HEAD","id","label","alignRight","descendingComparator","a","b","orderBy","getComparator","order","applySortFilter","array","comparator","query","stabilizedThis","map","el","index","sort","_user","filterName","name","toLowerCase","indexOf","filterEmail","email","UserList","themeStretch","theme","dispatch","user","logout","state","userList","specialPermissionList","page","setPage","setOrder","selected","setSelected","setOrderBy","setFilterName","setFilterEmail","localStorage","getItem","Number","rowsPerPage","setRowsPerPage","openDeleteConfirm","setOpenDeleteConfirm","handleUserId","setHandleUserId","enqueueSnackbar","setting","settingsList","parameterSettings","find","settingRow","type","handleCloseDeleteConfirm","handleRequestSort","event","property","isAsc","handleSelectAllClick","target","checked","newSelecteds","n","handleClick","selectedIndex","newSelected","concat","slice","length","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","setItem","handleFilterByName","handleFilterByEmail","onDeleteUser","userId","_id","variant","handleDeleteUser","delete","emptyRows","Math","max","filteredUsers","isUserNotFound","href","root","newUser","minWidth","row","avatarUrl","role","credit","balanceCurrency","balance","status","isVerified","address","coverage","country","online","userSpecialPermissions","specialPermssion","displayRole","isItemSelected","avatarImgSrc","baseUrl","displayMaxCoverage","max_coverage","settings","default_coverage","padding","color","textDecorationLine","maxWidth","display","palette","mode","height","py"],"mappings":"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","sourcesContent":["import { filter } from 'lodash';\r\nimport { Icon } from '@iconify/react';\r\nimport { sentenceCase, paramCase } from 'change-case';\r\nimport { useState, useEffect } from 'react';\r\nimport { useSnackbar } from 'notistack5';\r\nimport plusFill from '@iconify/icons-eva/plus-fill';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n// material\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport {\r\n  Card,\r\n  Table,\r\n  Stack,\r\n  Avatar,\r\n  Button,\r\n  Checkbox,\r\n  TableRow,\r\n  TableBody,\r\n  TableCell,\r\n  Container,\r\n  Typography,\r\n  TableContainer,\r\n  TablePagination,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Box,\r\n  IconButton\r\n} from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport axios from '../../utils/axios';\r\n// redux\r\nimport { useDispatch, useSelector } from '../../redux/store';\r\nimport { getUserList, deleteUser, getSpecialPermssionList } from '../../redux/slices/user';\r\nimport { getSettingsList } from '../../redux/slices/settings';\r\n// routes\r\nimport { PATH_DASHBOARD } from '../../routes/paths';\r\n// hooks\r\nimport useSettings from '../../hooks/useSettings';\r\nimport useAuth from '../../hooks/useAuth';\r\n// components\r\nimport Page from '../../components/Page';\r\nimport Label from '../../components/Label';\r\nimport Scrollbar from '../../components/Scrollbar';\r\nimport SearchNotFound from '../../components/SearchNotFound';\r\nimport HeaderBreadcrumbs from '../../components/HeaderBreadcrumbs';\r\nimport { UserListHead, UserListToolbar, UserMoreMenu } from '../../components/_dashboard/user/list';\r\nimport ConfirmDialog from '../../components/ConfirmDialog';\r\nimport { serverConfig } from '../../config';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst TABLE_HEAD = [\r\n  { id: 'email', label: 'Account(Email)', alignRight: false },\r\n  { id: 'name', label: 'Nickname', alignRight: false },\r\n  { id: 'role', label: 'Role', alignRight: false },\r\n  { id: 'credit', label: 'Credit', alignRight: false },\r\n  { id: 'balance', label: 'Balance', alignRight: false },\r\n  { id: 'status', label: 'Status', alignRight: false },\r\n  { id: 'max_coverage', label: 'Max Coverage', alignRight: false },\r\n  { id: 'country', label: 'Location', alignRight: false },\r\n  { id: 'operation', label: 'Operation', alignRight: false }\r\n];\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction applySortFilter(array, comparator, query) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  if (query) {\r\n    array = stabilizedThis.map((el) => el[0]);\r\n    return filter(array, (_user) => {\r\n      if (query.filterName && _user.name.toLowerCase().indexOf(query.filterName.toLowerCase()) === -1) {\r\n        return false;\r\n      }\r\n      if (query.filterEmail && _user.email.toLowerCase().indexOf(query.filterEmail.toLowerCase()) === -1) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nexport default function UserList() {\r\n  const { themeStretch } = useSettings();\r\n  const theme = useTheme();\r\n  const dispatch = useDispatch();\r\n  const { user, logout } = useAuth();\r\n  const { userList, specialPermissionList } = useSelector((state) => state.user);\r\n  const [page, setPage] = useState(0);\r\n  const [order, setOrder] = useState('asc');\r\n  const [selected, setSelected] = useState([]);\r\n  const [orderBy, setOrderBy] = useState('role');\r\n  const [filterName, setFilterName] = useState('');\r\n  const [filterEmail, setFilterEmail] = useState('');\r\n  const [rowsPerPage, setRowsPerPage] = useState(\r\n    localStorage.getItem('userlist_rows_per_page') ? Number(localStorage.getItem('userlist_rows_per_page')) : 25\r\n  );\r\n  const [openDeleteConfirm, setOpenDeleteConfirm] = useState(false);\r\n  const [handleUserId, setHandleUserId] = useState(null);\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const { settingsList } = useSelector((state) => state.setting);\r\n  const parameterSettings = settingsList.find((settingRow) => settingRow.type === 'parameter');\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserList());\r\n    dispatch(getSpecialPermssionList());\r\n    dispatch(getSettingsList());\r\n  }, [dispatch]);\r\n\r\n  const handleCloseDeleteConfirm = () => {\r\n    setOpenDeleteConfirm(false);\r\n  };\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = userList.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, name) => {\r\n    const selectedIndex = selected.indexOf(name);\r\n    let newSelected = [];\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, name);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n    }\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    localStorage.setItem('userlist_rows_per_page', parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleFilterByName = (event) => {\r\n    setFilterName(event.target.value);\r\n  };\r\n\r\n  const handleFilterByEmail = (event) => {\r\n    setFilterEmail(event.target.value);\r\n  };\r\n\r\n  const onDeleteUser = async (userId) => {\r\n    if (userId !== user._id) {\r\n      setHandleUserId(userId);\r\n      setOpenDeleteConfirm(true);\r\n    } else {\r\n      enqueueSnackbar(\"You can't delete this user you logged in\", { variant: 'warning' });\r\n    }\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    if (userId !== user._id) {\r\n      dispatch(deleteUser(userId));\r\n      await axios.delete(`user/delete/${userId}`);\r\n      setHandleUserId(null);\r\n    }\r\n  };\r\n\r\n  const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - userList.length) : 0;\r\n  const filteredUsers = applySortFilter(userList, getComparator(order, orderBy), {\r\n    filterName,\r\n    filterEmail\r\n  });\r\n\r\n  const isUserNotFound = filteredUsers.length === 0;\r\n\r\n  return (\r\n    <Page title=\"User: List | Locals\">\r\n      <Container maxWidth={themeStretch ? false : 'lg'}>\r\n        <HeaderBreadcrumbs\r\n          heading=\"User List\"\r\n          links={[\r\n            { name: 'Dashboard', href: PATH_DASHBOARD.root },\r\n            { name: 'User', href: PATH_DASHBOARD.user.root },\r\n            { name: 'List' }\r\n          ]}\r\n          action={\r\n            <Button\r\n              variant=\"contained\"\r\n              component={RouterLink}\r\n              to={PATH_DASHBOARD.user.newUser}\r\n              startIcon={<Icon icon={plusFill} />}\r\n            >\r\n              New User\r\n            </Button>\r\n          }\r\n        />\r\n\r\n        <Card>\r\n          <UserListToolbar\r\n            numSelected={selected.length}\r\n            filterName={filterName}\r\n            onFilterName={handleFilterByName}\r\n            filterEmail={filterEmail}\r\n            onFilterEmail={handleFilterByEmail}\r\n          />\r\n\r\n          <Scrollbar>\r\n            <TableContainer sx={{ minWidth: 800 }}>\r\n              <Table>\r\n                <UserListHead\r\n                  order={order}\r\n                  orderBy={orderBy}\r\n                  headLabel={TABLE_HEAD}\r\n                  rowCount={userList.length}\r\n                  numSelected={selected.length}\r\n                  onRequestSort={handleRequestSort}\r\n                  onSelectAllClick={handleSelectAllClick}\r\n                />\r\n                <TableBody>\r\n                  {filteredUsers.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => {\r\n                    const {\r\n                      _id,\r\n                      email,\r\n                      name,\r\n                      avatarUrl,\r\n                      role,\r\n                      credit,\r\n                      balanceCurrency,\r\n                      balance,\r\n                      status,\r\n                      isVerified,\r\n                      address,\r\n                      coverage,\r\n                      country,\r\n                      online\r\n                    } = row;\r\n                    const userSpecialPermissions = specialPermissionList.find(\r\n                      (specialPermssion) => specialPermssion.userId && paramCase(specialPermssion.userId) === _id\r\n                    );\r\n                    const displayRole =\r\n                      (role === 'user' || role === 's-user') && userSpecialPermissions ? 's-user' : role;\r\n                    const isItemSelected = selected.indexOf(name) !== -1;\r\n                    const avatarImgSrc = `${serverConfig.baseUrl}/user/img-src/${avatarUrl}`;\r\n                    const displayMaxCoverage =\r\n                      (userSpecialPermissions && userSpecialPermissions.max_coverage) ||\r\n                      (parameterSettings && parameterSettings.settings.default_coverage) ||\r\n                      150;\r\n\r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        key={_id}\r\n                        tabIndex={-1}\r\n                        role=\"checkbox\"\r\n                        selected={isItemSelected}\r\n                        aria-checked={isItemSelected}\r\n                      >\r\n                        <TableCell padding=\"checkbox\">\r\n                          <Checkbox checked={isItemSelected} onChange={(event) => handleClick(event, name)} />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" align=\"left\" style={{ padding: '0' }}>\r\n                          <Typography\r\n                            variant=\"body2\"\r\n                            noWrap\r\n                            component={RouterLink}\r\n                            to={`${PATH_DASHBOARD.user.root}/${paramCase(_id)}/details`}\r\n                            style={{ color: 'unset', textDecorationLine: 'none', maxWidth: '150px', display: 'block' }}\r\n                          >\r\n                            {email}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\" padding=\"none\" align=\"left\">\r\n                          <Stack\r\n                            direction=\"row\"\r\n                            alignItems=\"center\"\r\n                            spacing={2}\r\n                            component={RouterLink}\r\n                            to={`${PATH_DASHBOARD.user.root}/${paramCase(_id)}/details`}\r\n                            style={{ color: 'unset', textDecorationLine: 'none' }}\r\n                          >\r\n                            <Avatar alt={name} src={avatarImgSrc} />\r\n                            <Typography variant=\"body2\" noWrap>\r\n                              {name}\r\n                            </Typography>\r\n                          </Stack>\r\n                        </TableCell>\r\n                        <TableCell align=\"left\" style={{ padding: '0' }}>\r\n                          {displayRole}\r\n                        </TableCell>\r\n                        <TableCell align=\"right\">{credit || 0} %</TableCell>\r\n                        <TableCell align=\"right\">\r\n                          {balanceCurrency || '$'} {balance || 0}\r\n                        </TableCell>\r\n                        {/* <TableCell align=\"left\">\r\n                          <Label\r\n                            variant={theme.palette.mode === 'light' ? 'ghost' : 'filled'}\r\n                            color={(status === 'banned' && 'error') || 'success'}\r\n                          >\r\n                            {sentenceCase(status)}\r\n                          </Label>\r\n                        </TableCell> */}\r\n                        <TableCell align=\"left\">\r\n                          <Label\r\n                            variant={theme.palette.mode === 'light' ? 'ghost' : 'filled'}\r\n                            color={(!online && 'warning') || 'success'}\r\n                          >\r\n                            {online ? 'online' : 'offline'}\r\n                          </Label>\r\n                        </TableCell>\r\n                        <TableCell align=\"left\">{(role !== 'admin' && displayMaxCoverage) || 'all'}</TableCell>\r\n                        <TableCell align=\"left\">{country}</TableCell>\r\n\r\n                        <TableCell align=\"right\">\r\n                          <UserMoreMenu onDelete={() => onDeleteUser(_id)} userName={name} userId={_id} />\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                  {emptyRows > 0 && (\r\n                    <TableRow style={{ height: 53 * emptyRows }}>\r\n                      <TableCell colSpan={6} />\r\n                    </TableRow>\r\n                  )}\r\n                </TableBody>\r\n                {isUserNotFound && (\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell align=\"center\" colSpan={6} sx={{ py: 3 }}>\r\n                        <SearchNotFound searchQuery={`${filterName}, ${filterEmail}`} />\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                )}\r\n              </Table>\r\n            </TableContainer>\r\n          </Scrollbar>\r\n\r\n          <TablePagination\r\n            rowsPerPageOptions={[25, 50, 100]}\r\n            component=\"div\"\r\n            count={userList.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            onPageChange={handleChangePage}\r\n            onRowsPerPageChange={handleChangeRowsPerPage}\r\n          />\r\n        </Card>\r\n        {openDeleteConfirm && (\r\n          <ConfirmDialog\r\n            message=\"Are you sure you are going to delete this user?\"\r\n            onConfirm={() => handleDeleteUser(handleUserId)}\r\n            onClose={handleCloseDeleteConfirm}\r\n          />\r\n        )}\r\n      </Container>\r\n    </Page>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}