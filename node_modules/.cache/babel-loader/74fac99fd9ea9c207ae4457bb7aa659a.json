{"ast":null,"code":"import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"message\",\"conversation\",\"onOpenLightbox\"];import{formatDistanceToNowStrict}from'date-fns';// material\nimport{styled}from'@material-ui/core/styles';import{Avatar,Box,Typography}from'@material-ui/core';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RootStyle=styled('div')(function(_ref){var theme=_ref.theme;return{display:'flex',marginBottom:theme.spacing(3)};});var ContentStyle=styled('div')(function(_ref2){var theme=_ref2.theme;return{maxWidth:320,padding:theme.spacing(1.5),marginTop:theme.spacing(0.5),borderRadius:theme.shape.borderRadius,backgroundColor:theme.palette.background.neutral};});var InfoStyle=styled(Typography)(function(_ref3){var theme=_ref3.theme;return{display:'flex',marginBottom:theme.spacing(0.75),color:theme.palette.text.secondary};});var MessageImgStyle=styled('img')(function(_ref4){var theme=_ref4.theme;return{height:200,minWidth:296,width:'100%',cursor:'pointer',objectFit:'cover',borderRadius:theme.shape.borderRadius};});// ----------------------------------------------------------------------\nexport default function ChatMessageItem(_ref5){var message=_ref5.message,conversation=_ref5.conversation,onOpenLightbox=_ref5.onOpenLightbox,other=_objectWithoutProperties(_ref5,_excluded);console.log(message);var sender=conversation.participants.find(function(participant){return participant._id===message.senderId._id;});var senderDetails=message.senderId==='8864c717-587d-472a-929a-8e5f298024da-0'?{type:'me'}:{avatar:sender.avatarUrl,name:sender.name};var isMe=senderDetails.type==='me';var isImage=message.contentType==='image';var firstName=senderDetails.name&&senderDetails.name.split(' ')[0];return/*#__PURE__*/_jsx(RootStyle,_objectSpread(_objectSpread({},other),{},{children:/*#__PURE__*/_jsxs(Box,{sx:_objectSpread({display:'flex'},isMe&&{ml:'auto'}),children:[senderDetails.type!=='me'&&/*#__PURE__*/_jsx(Avatar,{alt:senderDetails.name,src:senderDetails.avatar,sx:{width:32,height:32}}),/*#__PURE__*/_jsxs(Box,{sx:{ml:2},children:[/*#__PURE__*/_jsxs(InfoStyle,{noWrap:true,variant:\"caption\",sx:_objectSpread({},isMe&&{justifyContent:'flex-end'}),children:[!isMe&&\"\".concat(firstName,\",\"),\"\\xA0\",formatDistanceToNowStrict(new Date(message.createdAt),{addSuffix:true})]}),/*#__PURE__*/_jsx(ContentStyle,{sx:_objectSpread({},isMe&&{color:'grey.800',bgcolor:'primary.lighter'}),children:isImage?/*#__PURE__*/_jsx(MessageImgStyle,{alt:\"attachment\",src:message.body,onClick:function onClick(){return onOpenLightbox(message.body);}}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:message.body})})]})]})}));}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/components/_dashboard/chat/ChatMessageItem.js"],"names":["formatDistanceToNowStrict","styled","Avatar","Box","Typography","RootStyle","theme","display","marginBottom","spacing","ContentStyle","maxWidth","padding","marginTop","borderRadius","shape","backgroundColor","palette","background","neutral","InfoStyle","color","text","secondary","MessageImgStyle","height","minWidth","width","cursor","objectFit","ChatMessageItem","message","conversation","onOpenLightbox","other","console","log","sender","participants","find","participant","_id","senderId","senderDetails","type","avatar","avatarUrl","name","isMe","isImage","contentType","firstName","split","ml","justifyContent","Date","createdAt","addSuffix","bgcolor","body"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { formatDistanceToNowStrict } from 'date-fns';\r\n// material\r\nimport { styled } from '@material-ui/core/styles';\r\nimport { Avatar, Box, Typography } from '@material-ui/core';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst RootStyle = styled('div')(({ theme }) => ({\r\n  display: 'flex',\r\n  marginBottom: theme.spacing(3)\r\n}));\r\n\r\nconst ContentStyle = styled('div')(({ theme }) => ({\r\n  maxWidth: 320,\r\n  padding: theme.spacing(1.5),\r\n  marginTop: theme.spacing(0.5),\r\n  borderRadius: theme.shape.borderRadius,\r\n  backgroundColor: theme.palette.background.neutral\r\n}));\r\n\r\nconst InfoStyle = styled(Typography)(({ theme }) => ({\r\n  display: 'flex',\r\n  marginBottom: theme.spacing(0.75),\r\n  color: theme.palette.text.secondary\r\n}));\r\n\r\nconst MessageImgStyle = styled('img')(({ theme }) => ({\r\n  height: 200,\r\n  minWidth: 296,\r\n  width: '100%',\r\n  cursor: 'pointer',\r\n  objectFit: 'cover',\r\n  borderRadius: theme.shape.borderRadius\r\n}));\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nChatMessageItem.propTypes = {\r\n  message: PropTypes.object.isRequired,\r\n  conversation: PropTypes.object.isRequired,\r\n  onOpenLightbox: PropTypes.func\r\n};\r\n\r\nexport default function ChatMessageItem({ message, conversation, onOpenLightbox, ...other }) {\r\n  console.log(message);\r\n  const sender = conversation.participants.find((participant) => participant._id === message.senderId._id);\r\n  const senderDetails =\r\n    message.senderId === '8864c717-587d-472a-929a-8e5f298024da-0'\r\n      ? { type: 'me' }\r\n      : { avatar: sender.avatarUrl, name: sender.name };\r\n\r\n  const isMe = senderDetails.type === 'me';\r\n  const isImage = message.contentType === 'image';\r\n  const firstName = senderDetails.name && senderDetails.name.split(' ')[0];\r\n\r\n  return (\r\n    <RootStyle {...other}>\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          ...(isMe && {\r\n            ml: 'auto'\r\n          })\r\n        }}\r\n      >\r\n        {senderDetails.type !== 'me' && (\r\n          <Avatar alt={senderDetails.name} src={senderDetails.avatar} sx={{ width: 32, height: 32 }} />\r\n        )}\r\n\r\n        <Box sx={{ ml: 2 }}>\r\n          <InfoStyle noWrap variant=\"caption\" sx={{ ...(isMe && { justifyContent: 'flex-end' }) }}>\r\n            {!isMe && `${firstName},`}&nbsp;\r\n            {formatDistanceToNowStrict(new Date(message.createdAt), {\r\n              addSuffix: true\r\n            })}\r\n          </InfoStyle>\r\n\r\n          <ContentStyle\r\n            sx={{\r\n              ...(isMe && {\r\n                color: 'grey.800',\r\n                bgcolor: 'primary.lighter'\r\n              })\r\n            }}\r\n          >\r\n            {isImage ? (\r\n              <MessageImgStyle alt=\"attachment\" src={message.body} onClick={() => onOpenLightbox(message.body)} />\r\n            ) : (\r\n              <Typography variant=\"body2\">{message.body}</Typography>\r\n            )}\r\n          </ContentStyle>\r\n        </Box>\r\n      </Box>\r\n    </RootStyle>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}