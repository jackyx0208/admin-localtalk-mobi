{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\localtalk.mobi(react+node)\\\\pro\\\\toptalk-adminpanel\\\\src\\\\components\\\\_dashboard\\\\chat\\\\ChatMessageList.js\";\nimport PropTypes from 'prop-types';\nimport { findIndex } from 'lodash';\nimport { useEffect, useState, useRef } from 'react'; //\n\nimport Scrollbar from '../../Scrollbar';\nimport LightboxModal from '../../LightboxModal';\nimport ChatMessageItem from './ChatMessageItem'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChatMessageList.propTypes = {\n  conversation: PropTypes.object.isRequired\n};\nexport default function ChatMessageList({\n  conversation\n}) {\n  const scrollRef = useRef();\n  const [openLightbox, setOpenLightbox] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(null);\n  useEffect(() => {\n    const scrollMessagesToBottom = () => {\n      if (scrollRef.current) {\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n      }\n    };\n\n    scrollMessagesToBottom();\n  }, [conversation.messages]);\n  const images = conversation.messages.filter(messages => messages.contentType === 'image').map(messages => messages.body);\n\n  const handleOpenLightbox = url => {\n    const selectedImage = findIndex(images, index => index === url);\n    setOpenLightbox(true);\n    setSelectedImage(selectedImage);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Scrollbar, {\n    scrollableNodeProps: {\n      ref: scrollRef\n    },\n    sx: {\n      p: 3,\n      flexGrow: 1\n    },\n    children: [conversation.messages.map(message => /*#__PURE__*/_jsxDEV(ChatMessageItem, {\n      message: message,\n      conversation: conversation,\n      onOpenLightbox: handleOpenLightbox\n    }, message._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(LightboxModal, {\n      images: images,\n      photoIndex: selectedImage,\n      setPhotoIndex: setSelectedImage,\n      isOpen: openLightbox,\n      onClose: () => setOpenLightbox(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["E:/projects/localtalk.mobi(react+node)/pro/toptalk-adminpanel/src/components/_dashboard/chat/ChatMessageList.js"],"names":["PropTypes","findIndex","useEffect","useState","useRef","Scrollbar","LightboxModal","ChatMessageItem","ChatMessageList","propTypes","conversation","object","isRequired","scrollRef","openLightbox","setOpenLightbox","selectedImage","setSelectedImage","scrollMessagesToBottom","current","scrollTop","scrollHeight","messages","images","filter","contentType","map","body","handleOpenLightbox","url","index","ref","p","flexGrow","message","_id"],"mappings":";AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,QAA0B,QAA1B;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C,C,CACA;;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,eAAP,MAA4B,mBAA5B,C,CAEA;;;AAEAC,eAAe,CAACC,SAAhB,GAA4B;AAC1BC,EAAAA,YAAY,EAAEV,SAAS,CAACW,MAAV,CAAiBC;AADL,CAA5B;AAIA,eAAe,SAASJ,eAAT,CAAyB;AAAEE,EAAAA;AAAF,CAAzB,EAA2C;AACxD,QAAMG,SAAS,GAAGT,MAAM,EAAxB;AACA,QAAM,CAACU,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACa,aAAD,EAAgBC,gBAAhB,IAAoCd,QAAQ,CAAC,IAAD,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,sBAAsB,GAAG,MAAM;AACnC,UAAIL,SAAS,CAACM,OAAd,EAAuB;AACrBN,QAAAA,SAAS,CAACM,OAAV,CAAkBC,SAAlB,GAA8BP,SAAS,CAACM,OAAV,CAAkBE,YAAhD;AACD;AACF,KAJD;;AAKAH,IAAAA,sBAAsB;AACvB,GAPQ,EAON,CAACR,YAAY,CAACY,QAAd,CAPM,CAAT;AASA,QAAMC,MAAM,GAAGb,YAAY,CAACY,QAAb,CACZE,MADY,CACJF,QAAD,IAAcA,QAAQ,CAACG,WAAT,KAAyB,OADlC,EAEZC,GAFY,CAEPJ,QAAD,IAAcA,QAAQ,CAACK,IAFf,CAAf;;AAIA,QAAMC,kBAAkB,GAAIC,GAAD,IAAS;AAClC,UAAMb,aAAa,GAAGf,SAAS,CAACsB,MAAD,EAAUO,KAAD,IAAWA,KAAK,KAAKD,GAA9B,CAA/B;AACAd,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,IAAAA,gBAAgB,CAACD,aAAD,CAAhB;AACD,GAJD;;AAMA,sBACE,QAAC,SAAD;AAAW,IAAA,mBAAmB,EAAE;AAAEe,MAAAA,GAAG,EAAElB;AAAP,KAAhC;AAAoD,IAAA,EAAE,EAAE;AAAEmB,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,QAAQ,EAAE;AAAlB,KAAxD;AAAA,eACGvB,YAAY,CAACY,QAAb,CAAsBI,GAAtB,CAA2BQ,OAAD,iBACzB,QAAC,eAAD;AAEE,MAAA,OAAO,EAAEA,OAFX;AAGE,MAAA,YAAY,EAAExB,YAHhB;AAIE,MAAA,cAAc,EAAEkB;AAJlB,OACOM,OAAO,CAACC,GADf;AAAA;AAAA;AAAA;AAAA,YADD,CADH,eAUE,QAAC,aAAD;AACE,MAAA,MAAM,EAAEZ,MADV;AAEE,MAAA,UAAU,EAAEP,aAFd;AAGE,MAAA,aAAa,EAAEC,gBAHjB;AAIE,MAAA,MAAM,EAAEH,YAJV;AAKE,MAAA,OAAO,EAAE,MAAMC,eAAe,CAAC,KAAD;AALhC;AAAA;AAAA;AAAA;AAAA,YAVF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoBD","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { findIndex } from 'lodash';\r\nimport { useEffect, useState, useRef } from 'react';\r\n//\r\nimport Scrollbar from '../../Scrollbar';\r\nimport LightboxModal from '../../LightboxModal';\r\nimport ChatMessageItem from './ChatMessageItem';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nChatMessageList.propTypes = {\r\n  conversation: PropTypes.object.isRequired\r\n};\r\n\r\nexport default function ChatMessageList({ conversation }) {\r\n  const scrollRef = useRef();\r\n  const [openLightbox, setOpenLightbox] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const scrollMessagesToBottom = () => {\r\n      if (scrollRef.current) {\r\n        scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n      }\r\n    };\r\n    scrollMessagesToBottom();\r\n  }, [conversation.messages]);\r\n\r\n  const images = conversation.messages\r\n    .filter((messages) => messages.contentType === 'image')\r\n    .map((messages) => messages.body);\r\n\r\n  const handleOpenLightbox = (url) => {\r\n    const selectedImage = findIndex(images, (index) => index === url);\r\n    setOpenLightbox(true);\r\n    setSelectedImage(selectedImage);\r\n  };\r\n\r\n  return (\r\n    <Scrollbar scrollableNodeProps={{ ref: scrollRef }} sx={{ p: 3, flexGrow: 1 }}>\r\n      {conversation.messages.map((message) => (\r\n        <ChatMessageItem\r\n          key={message._id}\r\n          message={message}\r\n          conversation={conversation}\r\n          onOpenLightbox={handleOpenLightbox}\r\n        />\r\n      ))}\r\n\r\n      <LightboxModal\r\n        images={images}\r\n        photoIndex={selectedImage}\r\n        setPhotoIndex={setSelectedImage}\r\n        isOpen={openLightbox}\r\n        onClose={() => setOpenLightbox(false)}\r\n      />\r\n    </Scrollbar>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}