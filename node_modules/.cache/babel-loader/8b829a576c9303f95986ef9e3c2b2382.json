{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{map,filter}from'lodash';import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';// ----------------------------------------------------------------------\nvar initialState={isLoading:false,error:false,events:[],isOpenModal:false,selectedEventId:null,selectedRange:null};var slice=createSlice({name:'calendar',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET EVENTS\ngetEventsSuccess:function getEventsSuccess(state,action){state.isLoading=false;state.events=action.payload;},// CREATE EVENT\ncreateEventSuccess:function createEventSuccess(state,action){var newEvent=action.payload;state.isLoading=false;state.events=[].concat(_toConsumableArray(state.events),[newEvent]);},// UPDATE EVENT\nupdateEventSuccess:function updateEventSuccess(state,action){var event=action.payload;var updateEvent=map(state.events,function(_event){if(_event.id===event.id){return event;}return _event;});state.isLoading=false;state.events=updateEvent;},// DELETE EVENT\ndeleteEventSuccess:function deleteEventSuccess(state,action){var eventId=action.payload.eventId;var deleteEvent=filter(state.events,function(user){return user.id!==eventId;});state.isLoading=false;state.events=deleteEvent;},// SELECT EVENT\nselectEvent:function selectEvent(state,action){var eventId=action.payload;state.isOpenModal=true;state.selectedEventId=eventId;},// SELECT RANGE\nselectRange:function selectRange(state,action){var _action$payload=action.payload,start=_action$payload.start,end=_action$payload.end;state.isOpenModal=true;state.selectedRange={start:start,end:end};},// OPEN MODAL\nopenModal:function openModal(state){state.isOpenModal=true;},// CLOSE MODAL\ncloseModal:function closeModal(state){state.isOpenModal=false;state.selectedEventId=null;state.selectedRange=null;}}});// Reducer\nexport default slice.reducer;// Actions\nvar _slice$actions=slice.actions,openModal=_slice$actions.openModal,closeModal=_slice$actions.closeModal,selectEvent=_slice$actions.selectEvent;// ----------------------------------------------------------------------\nexport{openModal,closeModal,selectEvent};export function getEvents(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/calendar/events');case 4:response=_context.sent;dispatch(slice.actions.getEventsSuccess(response.data.events));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function createEvent(newEvent){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.post('/api/calendar/events/new',newEvent);case 4:response=_context2.sent;dispatch(slice.actions.createEventSuccess(response.data.event));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function updateEvent(eventId,updateEvent){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.post('/api/calendar/events/update',{eventId:eventId,updateEvent:updateEvent});case 4:response=_context3.sent;dispatch(slice.actions.updateEventSuccess(response.data.event));_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch(slice.actions.hasError(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function deleteEvent(eventId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(slice.actions.startLoading());_context4.prev=1;_context4.next=4;return axios.post('/api/calendar/events/delete',{eventId:eventId});case 4:dispatch(slice.actions.deleteEventSuccess({eventId:eventId}));_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](1);dispatch(slice.actions.hasError(_context4.t0));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[1,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function selectRange(start,end){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch(slice.actions.selectRange({start:start.getTime(),end:end.getTime()}));case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/redux/slices/calendar.js"],"names":["map","filter","createSlice","axios","initialState","isLoading","error","events","isOpenModal","selectedEventId","selectedRange","slice","name","reducers","startLoading","state","hasError","action","payload","getEventsSuccess","createEventSuccess","newEvent","updateEventSuccess","event","updateEvent","_event","id","deleteEventSuccess","eventId","deleteEvent","user","selectEvent","selectRange","start","end","openModal","closeModal","reducer","actions","getEvents","dispatch","get","response","data","createEvent","post","getTime"],"mappings":"0fAAA,OAASA,GAAT,CAAcC,MAAd,KAA4B,QAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CAEA;AAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,SAAS,CAAE,KADQ,CAEnBC,KAAK,CAAE,KAFY,CAGnBC,MAAM,CAAE,EAHW,CAInBC,WAAW,CAAE,KAJM,CAKnBC,eAAe,CAAE,IALE,CAMnBC,aAAa,CAAE,IANI,CAArB,CASA,GAAMC,CAAAA,KAAK,CAAGT,WAAW,CAAC,CACxBU,IAAI,CAAE,UADkB,CAExBR,YAAY,CAAZA,YAFwB,CAGxBS,QAAQ,CAAE,CACR;AACAC,YAFQ,uBAEKC,KAFL,CAEY,CAClBA,KAAK,CAACV,SAAN,CAAkB,IAAlB,CACD,CAJO,CAMR;AACAW,QAPQ,mBAOCD,KAPD,CAOQE,MAPR,CAOgB,CACtBF,KAAK,CAACV,SAAN,CAAkB,KAAlB,CACAU,KAAK,CAACT,KAAN,CAAcW,MAAM,CAACC,OAArB,CACD,CAVO,CAYR;AACAC,gBAbQ,2BAaSJ,KAbT,CAagBE,MAbhB,CAawB,CAC9BF,KAAK,CAACV,SAAN,CAAkB,KAAlB,CACAU,KAAK,CAACR,MAAN,CAAeU,MAAM,CAACC,OAAtB,CACD,CAhBO,CAkBR;AACAE,kBAnBQ,6BAmBWL,KAnBX,CAmBkBE,MAnBlB,CAmB0B,CAChC,GAAMI,CAAAA,QAAQ,CAAGJ,MAAM,CAACC,OAAxB,CACAH,KAAK,CAACV,SAAN,CAAkB,KAAlB,CACAU,KAAK,CAACR,MAAN,8BAAmBQ,KAAK,CAACR,MAAzB,GAAiCc,QAAjC,GACD,CAvBO,CAyBR;AACAC,kBA1BQ,6BA0BWP,KA1BX,CA0BkBE,MA1BlB,CA0B0B,CAChC,GAAMM,CAAAA,KAAK,CAAGN,MAAM,CAACC,OAArB,CACA,GAAMM,CAAAA,WAAW,CAAGxB,GAAG,CAACe,KAAK,CAACR,MAAP,CAAe,SAACkB,MAAD,CAAY,CAChD,GAAIA,MAAM,CAACC,EAAP,GAAcH,KAAK,CAACG,EAAxB,CAA4B,CAC1B,MAAOH,CAAAA,KAAP,CACD,CACD,MAAOE,CAAAA,MAAP,CACD,CALsB,CAAvB,CAOAV,KAAK,CAACV,SAAN,CAAkB,KAAlB,CACAU,KAAK,CAACR,MAAN,CAAeiB,WAAf,CACD,CArCO,CAuCR;AACAG,kBAxCQ,6BAwCWZ,KAxCX,CAwCkBE,MAxClB,CAwC0B,CAChC,GAAQW,CAAAA,OAAR,CAAoBX,MAAM,CAACC,OAA3B,CAAQU,OAAR,CACA,GAAMC,CAAAA,WAAW,CAAG5B,MAAM,CAACc,KAAK,CAACR,MAAP,CAAe,SAACuB,IAAD,QAAUA,CAAAA,IAAI,CAACJ,EAAL,GAAYE,OAAtB,EAAf,CAA1B,CACAb,KAAK,CAACV,SAAN,CAAkB,KAAlB,CACAU,KAAK,CAACR,MAAN,CAAesB,WAAf,CACD,CA7CO,CA+CR;AACAE,WAhDQ,sBAgDIhB,KAhDJ,CAgDWE,MAhDX,CAgDmB,CACzB,GAAMW,CAAAA,OAAO,CAAGX,MAAM,CAACC,OAAvB,CACAH,KAAK,CAACP,WAAN,CAAoB,IAApB,CACAO,KAAK,CAACN,eAAN,CAAwBmB,OAAxB,CACD,CApDO,CAsDR;AACAI,WAvDQ,sBAuDIjB,KAvDJ,CAuDWE,MAvDX,CAuDmB,CACzB,oBAAuBA,MAAM,CAACC,OAA9B,CAAQe,KAAR,iBAAQA,KAAR,CAAeC,GAAf,iBAAeA,GAAf,CACAnB,KAAK,CAACP,WAAN,CAAoB,IAApB,CACAO,KAAK,CAACL,aAAN,CAAsB,CAAEuB,KAAK,CAALA,KAAF,CAASC,GAAG,CAAHA,GAAT,CAAtB,CACD,CA3DO,CA6DR;AACAC,SA9DQ,oBA8DEpB,KA9DF,CA8DS,CACfA,KAAK,CAACP,WAAN,CAAoB,IAApB,CACD,CAhEO,CAkER;AACA4B,UAnEQ,qBAmEGrB,KAnEH,CAmEU,CAChBA,KAAK,CAACP,WAAN,CAAoB,KAApB,CACAO,KAAK,CAACN,eAAN,CAAwB,IAAxB,CACAM,KAAK,CAACL,aAAN,CAAsB,IAAtB,CACD,CAvEO,CAHc,CAAD,CAAzB,CA8EA;AACA,cAAeC,CAAAA,KAAK,CAAC0B,OAArB,CAEA;AACO,mBAA+C1B,KAAK,CAAC2B,OAArD,CAAQH,SAAR,gBAAQA,SAAR,CAAmBC,UAAnB,gBAAmBA,UAAnB,CAA+BL,WAA/B,gBAA+BA,WAA/B,CAEP;yCAEA,MAAO,SAASQ,CAAAA,SAAT,EAAqB,CAC1B,+FAAO,iBAAOC,QAAP,+HACLA,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcxB,YAAd,EAAD,CAAR,CADK,sCAGoBX,CAAAA,KAAK,CAACsC,GAAN,CAAU,sBAAV,CAHpB,QAGGC,QAHH,eAIHF,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcnB,gBAAd,CAA+BuB,QAAQ,CAACC,IAAT,CAAcpC,MAA7C,CAAD,CAAR,CAJG,+EAMHiC,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAActB,QAAd,aAAD,CAAR,CANG,oEAAP,+DASD,CAED;AAEA,MAAO,SAAS4B,CAAAA,WAAT,CAAqBvB,QAArB,CAA+B,CACpC,gGAAO,kBAAOmB,QAAP,mIACLA,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcxB,YAAd,EAAD,CAAR,CADK,wCAGoBX,CAAAA,KAAK,CAAC0C,IAAN,CAAW,0BAAX,CAAuCxB,QAAvC,CAHpB,QAGGqB,QAHH,gBAIHF,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAclB,kBAAd,CAAiCsB,QAAQ,CAACC,IAAT,CAAcpB,KAA/C,CAAD,CAAR,CAJG,mFAMHiB,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAActB,QAAd,cAAD,CAAR,CANG,sEAAP,iEASD,CAED;AAEA,MAAO,SAASQ,CAAAA,WAAT,CAAqBI,OAArB,CAA8BJ,WAA9B,CAA2C,CAChD,gGAAO,kBAAOgB,QAAP,mIACLA,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcxB,YAAd,EAAD,CAAR,CADK,wCAGoBX,CAAAA,KAAK,CAAC0C,IAAN,CAAW,6BAAX,CAA0C,CAC/DjB,OAAO,CAAPA,OAD+D,CAE/DJ,WAAW,CAAXA,WAF+D,CAA1C,CAHpB,QAGGkB,QAHH,gBAOHF,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAchB,kBAAd,CAAiCoB,QAAQ,CAACC,IAAT,CAAcpB,KAA/C,CAAD,CAAR,CAPG,mFASHiB,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAActB,QAAd,cAAD,CAAR,CATG,sEAAP,iEAYD,CAED;AAEA,MAAO,SAASa,CAAAA,WAAT,CAAqBD,OAArB,CAA8B,CACnC,gGAAO,kBAAOY,QAAP,sHACLA,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcxB,YAAd,EAAD,CAAR,CADK,wCAGGX,CAAAA,KAAK,CAAC0C,IAAN,CAAW,6BAAX,CAA0C,CAAEjB,OAAO,CAAPA,OAAF,CAA1C,CAHH,QAIHY,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAAcX,kBAAd,CAAiC,CAAEC,OAAO,CAAPA,OAAF,CAAjC,CAAD,CAAR,CAJG,mFAMHY,QAAQ,CAAC7B,KAAK,CAAC2B,OAAN,CAActB,QAAd,cAAD,CAAR,CANG,sEAAP,iEASD,CAED;AAEA,MAAO,SAASgB,CAAAA,WAAT,CAAqBC,KAArB,CAA4BC,GAA5B,CAAiC,CACtC,gGAAO,kBAAOM,QAAP,sHACLA,QAAQ,CACN7B,KAAK,CAAC2B,OAAN,CAAcN,WAAd,CAA0B,CACxBC,KAAK,CAAEA,KAAK,CAACa,OAAN,EADiB,CAExBZ,GAAG,CAAEA,GAAG,CAACY,OAAJ,EAFmB,CAA1B,CADM,CAAR,CADK,wDAAP,iEAQD","sourcesContent":["import { map, filter } from 'lodash';\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  events: [],\r\n  isOpenModal: false,\r\n  selectedEventId: null,\r\n  selectedRange: null\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'calendar',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET EVENTS\r\n    getEventsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.events = action.payload;\r\n    },\r\n\r\n    // CREATE EVENT\r\n    createEventSuccess(state, action) {\r\n      const newEvent = action.payload;\r\n      state.isLoading = false;\r\n      state.events = [...state.events, newEvent];\r\n    },\r\n\r\n    // UPDATE EVENT\r\n    updateEventSuccess(state, action) {\r\n      const event = action.payload;\r\n      const updateEvent = map(state.events, (_event) => {\r\n        if (_event.id === event.id) {\r\n          return event;\r\n        }\r\n        return _event;\r\n      });\r\n\r\n      state.isLoading = false;\r\n      state.events = updateEvent;\r\n    },\r\n\r\n    // DELETE EVENT\r\n    deleteEventSuccess(state, action) {\r\n      const { eventId } = action.payload;\r\n      const deleteEvent = filter(state.events, (user) => user.id !== eventId);\r\n      state.isLoading = false;\r\n      state.events = deleteEvent;\r\n    },\r\n\r\n    // SELECT EVENT\r\n    selectEvent(state, action) {\r\n      const eventId = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedEventId = eventId;\r\n    },\r\n\r\n    // SELECT RANGE\r\n    selectRange(state, action) {\r\n      const { start, end } = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedRange = { start, end };\r\n    },\r\n\r\n    // OPEN MODAL\r\n    openModal(state) {\r\n      state.isOpenModal = true;\r\n    },\r\n\r\n    // CLOSE MODAL\r\n    closeModal(state) {\r\n      state.isOpenModal = false;\r\n      state.selectedEventId = null;\r\n      state.selectedRange = null;\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// Actions\r\nexport const { openModal, closeModal, selectEvent } = slice.actions;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getEvents() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/calendar/events');\r\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function createEvent(newEvent) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/new', newEvent);\r\n      dispatch(slice.actions.createEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function updateEvent(eventId, updateEvent) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/update', {\r\n        eventId,\r\n        updateEvent\r\n      });\r\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function deleteEvent(eventId) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      await axios.post('/api/calendar/events/delete', { eventId });\r\n      dispatch(slice.actions.deleteEventSuccess({ eventId }));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function selectRange(start, end) {\r\n  return async (dispatch) => {\r\n    dispatch(\r\n      slice.actions.selectRange({\r\n        start: start.getTime(),\r\n        end: end.getTime()\r\n      })\r\n    );\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}