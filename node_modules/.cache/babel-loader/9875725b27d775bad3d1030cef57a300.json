{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';// utils\nimport axios from'../../utils/axios';// ----------------------------------------------------------------------\nvar initialState={isLoading:false,error:false,posts:[],post:null,recentPosts:[],hasMore:true,index:0,step:11};var slice=createSlice({name:'blog',initialState:initialState,reducers:{// START LOADING\nstartLoading:function startLoading(state){state.isLoading=true;},// HAS ERROR\nhasError:function hasError(state,action){state.isLoading=false;state.error=action.payload;},// GET POSTS\ngetPostsSuccess:function getPostsSuccess(state,action){state.isLoading=false;state.posts=action.payload;},// GET POST INFINITE\ngetPostsInitial:function getPostsInitial(state,action){state.isLoading=false;state.posts=action.payload;},getMorePosts:function getMorePosts(state){var setIndex=state.index+state.step;state.index=setIndex;},noHasMore:function noHasMore(state){state.hasMore=false;},// GET POST\ngetPostSuccess:function getPostSuccess(state,action){state.isLoading=false;state.post=action.payload;},// GET RECENT POST\ngetRecentPostsSuccess:function getRecentPostsSuccess(state,action){state.isLoading=false;state.recentPosts=action.payload;}}});// Reducer\nexport default slice.reducer;// Actions\nvar getMorePosts=slice.actions.getMorePosts;// ----------------------------------------------------------------------\nexport{getMorePosts};export function getAllPosts(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(slice.actions.startLoading());_context.prev=1;_context.next=4;return axios.get('/api/blog/posts/all');case 4:response=_context.sent;dispatch(slice.actions.getPostsSuccess(response.data.posts));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch(slice.actions.hasError(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function getPostsInitial(index,step){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,results,maxLength;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(slice.actions.startLoading());_context2.prev=1;_context2.next=4;return axios.get('/api/blog/posts',{params:{index:index,step:step}});case 4:response=_context2.sent;results=response.data.results.length;maxLength=response.data.maxLength;dispatch(slice.actions.getPostsInitial(response.data.results));if(results>=maxLength){dispatch(slice.actions.noHasMore());}_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch(slice.actions.hasError(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function getPost(title){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch(slice.actions.startLoading());_context3.prev=1;_context3.next=4;return axios.get('/api/blog/post',{params:{title:title}});case 4:response=_context3.sent;dispatch(slice.actions.getPostSuccess(response.data.post));_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.error(_context3.t0);dispatch(slice.actions.hasError(_context3.t0));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();}// ----------------------------------------------------------------------\nexport function getRecentPosts(title){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(slice.actions.startLoading());_context4.prev=1;_context4.next=4;return axios.get('/api/blog/posts/recent',{params:{title:title}});case 4:response=_context4.sent;dispatch(slice.actions.getRecentPostsSuccess(response.data.recentPosts));_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);console.error(_context4.t0);dispatch(slice.actions.hasError(_context4.t0));case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/redux/slices/blog.js"],"names":["createSlice","axios","initialState","isLoading","error","posts","post","recentPosts","hasMore","index","step","slice","name","reducers","startLoading","state","hasError","action","payload","getPostsSuccess","getPostsInitial","getMorePosts","setIndex","noHasMore","getPostSuccess","getRecentPostsSuccess","reducer","actions","getAllPosts","dispatch","get","response","data","params","results","length","maxLength","getPost","title","console","getRecentPosts"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  posts: [],\r\n  post: null,\r\n  recentPosts: [],\r\n  hasMore: true,\r\n  index: 0,\r\n  step: 11\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'blog',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET POSTS\r\n    getPostsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.posts = action.payload;\r\n    },\r\n\r\n    // GET POST INFINITE\r\n    getPostsInitial(state, action) {\r\n      state.isLoading = false;\r\n      state.posts = action.payload;\r\n    },\r\n\r\n    getMorePosts(state) {\r\n      const setIndex = state.index + state.step;\r\n      state.index = setIndex;\r\n    },\r\n\r\n    noHasMore(state) {\r\n      state.hasMore = false;\r\n    },\r\n\r\n    // GET POST\r\n    getPostSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.post = action.payload;\r\n    },\r\n\r\n    // GET RECENT POST\r\n    getRecentPostsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.recentPosts = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// Actions\r\nexport const { getMorePosts } = slice.actions;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getAllPosts() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/blog/posts/all');\r\n      dispatch(slice.actions.getPostsSuccess(response.data.posts));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getPostsInitial(index, step) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/blog/posts', {\r\n        params: { index, step }\r\n      });\r\n      const results = response.data.results.length;\r\n      const { maxLength } = response.data;\r\n\r\n      dispatch(slice.actions.getPostsInitial(response.data.results));\r\n\r\n      if (results >= maxLength) {\r\n        dispatch(slice.actions.noHasMore());\r\n      }\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getPost(title) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/blog/post', {\r\n        params: { title }\r\n      });\r\n      dispatch(slice.actions.getPostSuccess(response.data.post));\r\n    } catch (error) {\r\n      console.error(error);\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getRecentPosts(title) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/blog/posts/recent', {\r\n        params: { title }\r\n      });\r\n\r\n      dispatch(slice.actions.getRecentPostsSuccess(response.data.recentPosts));\r\n    } catch (error) {\r\n      console.error(error);\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}