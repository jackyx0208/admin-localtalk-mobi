{"ast":null,"code":"import { map, filter } from 'lodash';\nimport { createSlice } from '@reduxjs/toolkit'; // utils\n\nimport axios from '../../utils/axios'; // ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: false,\n  myProfile: null,\n  posts: [],\n  users: [],\n  userList: [],\n  followers: [],\n  friends: [],\n  gallery: [],\n  cards: null,\n  addressBook: [],\n  invoices: [],\n  notifications: null,\n  specialPermissionList: []\n};\nconst slice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET PROFILE\n    getProfileSuccess(state, action) {\n      state.isLoading = false;\n      state.myProfile = action.payload;\n    },\n\n    // GET POSTS\n    getPostsSuccess(state, action) {\n      state.isLoading = false;\n      state.posts = action.payload;\n    },\n\n    // GET USERS\n    getUsersSuccess(state, action) {\n      state.isLoading = false;\n      state.users = action.payload;\n    },\n\n    // DELETE USERS\n    deleteUser(state, action) {\n      const deleteUser = filter(state.userList, user => user._id !== action.payload);\n      state.userList = deleteUser;\n    },\n\n    // GET FOLLOWERS\n    getFollowersSuccess(state, action) {\n      state.isLoading = false;\n      state.followers = action.payload;\n    },\n\n    // ON TOGGLE FOLLOW\n    onToggleFollow(state, action) {\n      const followerId = action.payload;\n      const handleToggle = map(state.followers, follower => {\n        if (follower.id === followerId) {\n          return { ...follower,\n            isFollowed: !follower.isFollowed\n          };\n        }\n\n        return follower;\n      });\n      state.followers = handleToggle;\n    },\n\n    // GET FRIENDS\n    getFriendsSuccess(state, action) {\n      state.isLoading = false;\n      state.friends = action.payload;\n    },\n\n    // GET GALLERY\n    getGallerySuccess(state, action) {\n      state.isLoading = false;\n      state.gallery = action.payload;\n    },\n\n    // GET MANAGE USERS\n    getUserListSuccess(state, action) {\n      state.isLoading = false;\n      state.userList = action.payload;\n    },\n\n    // GET CARDS\n    getCardsSuccess(state, action) {\n      state.isLoading = false;\n      state.cards = action.payload;\n    },\n\n    // GET ADDRESS BOOK\n    getAddressBookSuccess(state, action) {\n      state.isLoading = false;\n      state.addressBook = action.payload;\n    },\n\n    // GET INVOICES\n    getInvoicesSuccess(state, action) {\n      state.isLoading = false;\n      state.invoices = action.payload;\n    },\n\n    // GET NOTIFICATIONS\n    getNotificationsSuccess(state, action) {\n      state.isLoading = false;\n      state.notifications = action.payload;\n    },\n\n    // GET SpecialPermssions\n    getSpecialPermissionListSuccess(state, action) {\n      state.isLoading = false;\n      state.specialPermissionList = action.payload;\n    }\n\n  }\n}); // Reducer\n\nexport default slice.reducer; // Actions\n\nexport const {\n  onToggleFollow,\n  deleteUser\n} = slice.actions; // ----------------------------------------------------------------------\n\nexport function getProfile() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/profile');\n      dispatch(slice.actions.getProfileSuccess(response.data.profile));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getPosts() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/posts');\n      dispatch(slice.actions.getPostsSuccess(response.data.posts));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getFollowers() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/social/followers');\n      dispatch(slice.actions.getFollowersSuccess(response.data.followers));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getFriends() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/social/friends');\n      dispatch(slice.actions.getFriendsSuccess(response.data.friends));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getGallery() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/social/gallery');\n      dispatch(slice.actions.getGallerySuccess(response.data.gallery));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getUserList() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/user/getUsers');\n      dispatch(slice.actions.getUserListSuccess(response.data.data));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getCards() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/account/cards');\n      dispatch(slice.actions.getCardsSuccess(response.data.cards));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getAddressBook() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/account/address-book');\n      dispatch(slice.actions.getAddressBookSuccess(response.data.addressBook));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getInvoices() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/account/invoices');\n      dispatch(slice.actions.getInvoicesSuccess(response.data.invoices));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getNotifications() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/account/notifications-settings');\n      dispatch(slice.actions.getNotificationsSuccess(response.data.notifications));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getUsers() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/user/all');\n      dispatch(slice.actions.getUsersSuccess(response.data.users));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function getSpecialPermssionList() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.post('/user/getSpecialPermissions');\n      dispatch(slice.actions.getSpecialPermissionListSuccess(response.data.data));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n}","map":{"version":3,"sources":["E:/projects/localtalk.mobi(react+node)/pro/toptalk-adminpanel/src/redux/slices/user.js"],"names":["map","filter","createSlice","axios","initialState","isLoading","error","myProfile","posts","users","userList","followers","friends","gallery","cards","addressBook","invoices","notifications","specialPermissionList","slice","name","reducers","startLoading","state","hasError","action","payload","getProfileSuccess","getPostsSuccess","getUsersSuccess","deleteUser","user","_id","getFollowersSuccess","onToggleFollow","followerId","handleToggle","follower","id","isFollowed","getFriendsSuccess","getGallerySuccess","getUserListSuccess","getCardsSuccess","getAddressBookSuccess","getInvoicesSuccess","getNotificationsSuccess","getSpecialPermissionListSuccess","reducer","actions","getProfile","dispatch","response","get","data","profile","getPosts","getFollowers","getFriends","getGallery","getUserList","getCards","getAddressBook","getInvoices","getNotifications","getUsers","getSpecialPermssionList","post"],"mappings":"AAAA,SAASA,GAAT,EAAcC,MAAd,QAA4B,QAA5B;AACA,SAASC,WAAT,QAA4B,kBAA5B,C,CACA;;AACA,OAAOC,KAAP,MAAkB,mBAAlB,C,CAEA;;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,KADQ;AAEnBC,EAAAA,KAAK,EAAE,KAFY;AAGnBC,EAAAA,SAAS,EAAE,IAHQ;AAInBC,EAAAA,KAAK,EAAE,EAJY;AAKnBC,EAAAA,KAAK,EAAE,EALY;AAMnBC,EAAAA,QAAQ,EAAE,EANS;AAOnBC,EAAAA,SAAS,EAAE,EAPQ;AAQnBC,EAAAA,OAAO,EAAE,EARU;AASnBC,EAAAA,OAAO,EAAE,EATU;AAUnBC,EAAAA,KAAK,EAAE,IAVY;AAWnBC,EAAAA,WAAW,EAAE,EAXM;AAYnBC,EAAAA,QAAQ,EAAE,EAZS;AAanBC,EAAAA,aAAa,EAAE,IAbI;AAcnBC,EAAAA,qBAAqB,EAAE;AAdJ,CAArB;AAiBA,MAAMC,KAAK,GAAGjB,WAAW,CAAC;AACxBkB,EAAAA,IAAI,EAAE,MADkB;AAExBhB,EAAAA,YAFwB;AAGxBiB,EAAAA,QAAQ,EAAE;AACR;AACAC,IAAAA,YAAY,CAACC,KAAD,EAAQ;AAClBA,MAAAA,KAAK,CAAClB,SAAN,GAAkB,IAAlB;AACD,KAJO;;AAMR;AACAmB,IAAAA,QAAQ,CAACD,KAAD,EAAQE,MAAR,EAAgB;AACtBF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACjB,KAAN,GAAcmB,MAAM,CAACC,OAArB;AACD,KAVO;;AAYR;AACAC,IAAAA,iBAAiB,CAACJ,KAAD,EAAQE,MAAR,EAAgB;AAC/BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAAChB,SAAN,GAAkBkB,MAAM,CAACC,OAAzB;AACD,KAhBO;;AAkBR;AACAE,IAAAA,eAAe,CAACL,KAAD,EAAQE,MAAR,EAAgB;AAC7BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACf,KAAN,GAAciB,MAAM,CAACC,OAArB;AACD,KAtBO;;AAwBR;AACAG,IAAAA,eAAe,CAACN,KAAD,EAAQE,MAAR,EAAgB;AAC7BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACd,KAAN,GAAcgB,MAAM,CAACC,OAArB;AACD,KA5BO;;AA8BR;AACAI,IAAAA,UAAU,CAACP,KAAD,EAAQE,MAAR,EAAgB;AACxB,YAAMK,UAAU,GAAG7B,MAAM,CAACsB,KAAK,CAACb,QAAP,EAAkBqB,IAAD,IAAUA,IAAI,CAACC,GAAL,KAAaP,MAAM,CAACC,OAA/C,CAAzB;AACAH,MAAAA,KAAK,CAACb,QAAN,GAAiBoB,UAAjB;AACD,KAlCO;;AAoCR;AACAG,IAAAA,mBAAmB,CAACV,KAAD,EAAQE,MAAR,EAAgB;AACjCF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACZ,SAAN,GAAkBc,MAAM,CAACC,OAAzB;AACD,KAxCO;;AA0CR;AACAQ,IAAAA,cAAc,CAACX,KAAD,EAAQE,MAAR,EAAgB;AAC5B,YAAMU,UAAU,GAAGV,MAAM,CAACC,OAA1B;AAEA,YAAMU,YAAY,GAAGpC,GAAG,CAACuB,KAAK,CAACZ,SAAP,EAAmB0B,QAAD,IAAc;AACtD,YAAIA,QAAQ,CAACC,EAAT,KAAgBH,UAApB,EAAgC;AAC9B,iBAAO,EACL,GAAGE,QADE;AAELE,YAAAA,UAAU,EAAE,CAACF,QAAQ,CAACE;AAFjB,WAAP;AAID;;AACD,eAAOF,QAAP;AACD,OARuB,CAAxB;AAUAd,MAAAA,KAAK,CAACZ,SAAN,GAAkByB,YAAlB;AACD,KAzDO;;AA2DR;AACAI,IAAAA,iBAAiB,CAACjB,KAAD,EAAQE,MAAR,EAAgB;AAC/BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACX,OAAN,GAAgBa,MAAM,CAACC,OAAvB;AACD,KA/DO;;AAiER;AACAe,IAAAA,iBAAiB,CAAClB,KAAD,EAAQE,MAAR,EAAgB;AAC/BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACV,OAAN,GAAgBY,MAAM,CAACC,OAAvB;AACD,KArEO;;AAuER;AACAgB,IAAAA,kBAAkB,CAACnB,KAAD,EAAQE,MAAR,EAAgB;AAChCF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACb,QAAN,GAAiBe,MAAM,CAACC,OAAxB;AACD,KA3EO;;AA6ER;AACAiB,IAAAA,eAAe,CAACpB,KAAD,EAAQE,MAAR,EAAgB;AAC7BF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACT,KAAN,GAAcW,MAAM,CAACC,OAArB;AACD,KAjFO;;AAmFR;AACAkB,IAAAA,qBAAqB,CAACrB,KAAD,EAAQE,MAAR,EAAgB;AACnCF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACR,WAAN,GAAoBU,MAAM,CAACC,OAA3B;AACD,KAvFO;;AAyFR;AACAmB,IAAAA,kBAAkB,CAACtB,KAAD,EAAQE,MAAR,EAAgB;AAChCF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACP,QAAN,GAAiBS,MAAM,CAACC,OAAxB;AACD,KA7FO;;AA+FR;AACAoB,IAAAA,uBAAuB,CAACvB,KAAD,EAAQE,MAAR,EAAgB;AACrCF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACN,aAAN,GAAsBQ,MAAM,CAACC,OAA7B;AACD,KAnGO;;AAqGR;AACAqB,IAAAA,+BAA+B,CAACxB,KAAD,EAAQE,MAAR,EAAgB;AAC7CF,MAAAA,KAAK,CAAClB,SAAN,GAAkB,KAAlB;AACAkB,MAAAA,KAAK,CAACL,qBAAN,GAA8BO,MAAM,CAACC,OAArC;AACD;;AAzGO;AAHc,CAAD,CAAzB,C,CAgHA;;AACA,eAAeP,KAAK,CAAC6B,OAArB,C,CAEA;;AACA,OAAO,MAAM;AAAEd,EAAAA,cAAF;AAAkBJ,EAAAA;AAAlB,IAAiCX,KAAK,CAAC8B,OAA7C,C,CAEP;;AAEA,OAAO,SAASC,UAAT,GAAsB;AAC3B,SAAO,MAAOC,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,mBAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAActB,iBAAd,CAAgCyB,QAAQ,CAACE,IAAT,CAAcC,OAA9C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOjD,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASkD,QAAT,GAAoB;AACzB,SAAO,MAAOL,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,iBAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcrB,eAAd,CAA8BwB,QAAQ,CAACE,IAAT,CAAc9C,KAA5C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOF,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASmD,YAAT,GAAwB;AAC7B,SAAO,MAAON,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,4BAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAchB,mBAAd,CAAkCmB,QAAQ,CAACE,IAAT,CAAc3C,SAAhD,CAAD,CAAR;AACD,KAHD,CAGE,OAAOL,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASoD,UAAT,GAAsB;AAC3B,SAAO,MAAOP,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,0BAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcT,iBAAd,CAAgCY,QAAQ,CAACE,IAAT,CAAc1C,OAA9C,CAAD,CAAR;AACD,KAHD,CAGE,OAAON,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASqD,UAAT,GAAsB;AAC3B,SAAO,MAAOR,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,0BAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcR,iBAAd,CAAgCW,QAAQ,CAACE,IAAT,CAAczC,OAA9C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOP,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASsD,WAAT,GAAuB;AAC5B,SAAO,MAAOT,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,gBAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcP,kBAAd,CAAiCU,QAAQ,CAACE,IAAT,CAAcA,IAA/C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOhD,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASuD,QAAT,GAAoB;AACzB,SAAO,MAAOV,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,yBAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcN,eAAd,CAA8BS,QAAQ,CAACE,IAAT,CAAcxC,KAA5C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOR,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASwD,cAAT,GAA0B;AAC/B,SAAO,MAAOX,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,gCAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcL,qBAAd,CAAoCQ,QAAQ,CAACE,IAAT,CAAcvC,WAAlD,CAAD,CAAR;AACD,KAHD,CAGE,OAAOT,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAASyD,WAAT,GAAuB;AAC5B,SAAO,MAAOZ,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,4BAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcJ,kBAAd,CAAiCO,QAAQ,CAACE,IAAT,CAActC,QAA/C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOV,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAAS0D,gBAAT,GAA4B;AACjC,SAAO,MAAOb,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,0CAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcH,uBAAd,CAAsCM,QAAQ,CAACE,IAAT,CAAcrC,aAApD,CAAD,CAAR;AACD,KAHD,CAGE,OAAOX,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAAS2D,QAAT,GAAoB;AACzB,SAAO,MAAOd,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACkD,GAAN,CAAU,eAAV,CAAvB;AACAF,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcpB,eAAd,CAA8BuB,QAAQ,CAACE,IAAT,CAAc7C,KAA5C,CAAD,CAAR;AACD,KAHD,CAGE,OAAOH,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD,C,CAED;;AAEA,OAAO,SAAS4D,uBAAT,GAAmC;AACxC,SAAO,MAAOf,QAAP,IAAoB;AACzBA,IAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAc3B,YAAd,EAAD,CAAR;;AACA,QAAI;AACF,YAAM8B,QAAQ,GAAG,MAAMjD,KAAK,CAACgE,IAAN,CAAW,6BAAX,CAAvB;AACAhB,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAcF,+BAAd,CAA8CK,QAAQ,CAACE,IAAT,CAAcA,IAA5D,CAAD,CAAR;AACD,KAHD,CAGE,OAAOhD,KAAP,EAAc;AACd6C,MAAAA,QAAQ,CAAChC,KAAK,CAAC8B,OAAN,CAAczB,QAAd,CAAuBlB,KAAvB,CAAD,CAAR;AACD;AACF,GARD;AASD","sourcesContent":["import { map, filter } from 'lodash';\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  myProfile: null,\r\n  posts: [],\r\n  users: [],\r\n  userList: [],\r\n  followers: [],\r\n  friends: [],\r\n  gallery: [],\r\n  cards: null,\r\n  addressBook: [],\r\n  invoices: [],\r\n  notifications: null,\r\n  specialPermissionList: []\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET PROFILE\r\n    getProfileSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.myProfile = action.payload;\r\n    },\r\n\r\n    // GET POSTS\r\n    getPostsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.posts = action.payload;\r\n    },\r\n\r\n    // GET USERS\r\n    getUsersSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.users = action.payload;\r\n    },\r\n\r\n    // DELETE USERS\r\n    deleteUser(state, action) {\r\n      const deleteUser = filter(state.userList, (user) => user._id !== action.payload);\r\n      state.userList = deleteUser;\r\n    },\r\n\r\n    // GET FOLLOWERS\r\n    getFollowersSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.followers = action.payload;\r\n    },\r\n\r\n    // ON TOGGLE FOLLOW\r\n    onToggleFollow(state, action) {\r\n      const followerId = action.payload;\r\n\r\n      const handleToggle = map(state.followers, (follower) => {\r\n        if (follower.id === followerId) {\r\n          return {\r\n            ...follower,\r\n            isFollowed: !follower.isFollowed\r\n          };\r\n        }\r\n        return follower;\r\n      });\r\n\r\n      state.followers = handleToggle;\r\n    },\r\n\r\n    // GET FRIENDS\r\n    getFriendsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.friends = action.payload;\r\n    },\r\n\r\n    // GET GALLERY\r\n    getGallerySuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.gallery = action.payload;\r\n    },\r\n\r\n    // GET MANAGE USERS\r\n    getUserListSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.userList = action.payload;\r\n    },\r\n\r\n    // GET CARDS\r\n    getCardsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.cards = action.payload;\r\n    },\r\n\r\n    // GET ADDRESS BOOK\r\n    getAddressBookSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.addressBook = action.payload;\r\n    },\r\n\r\n    // GET INVOICES\r\n    getInvoicesSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.invoices = action.payload;\r\n    },\r\n\r\n    // GET NOTIFICATIONS\r\n    getNotificationsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.notifications = action.payload;\r\n    },\r\n\r\n    // GET SpecialPermssions\r\n    getSpecialPermissionListSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.specialPermissionList = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// Actions\r\nexport const { onToggleFollow, deleteUser } = slice.actions;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getProfile() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/profile');\r\n      dispatch(slice.actions.getProfileSuccess(response.data.profile));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getPosts() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/posts');\r\n      dispatch(slice.actions.getPostsSuccess(response.data.posts));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getFollowers() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/social/followers');\r\n      dispatch(slice.actions.getFollowersSuccess(response.data.followers));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getFriends() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/social/friends');\r\n      dispatch(slice.actions.getFriendsSuccess(response.data.friends));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getGallery() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/social/gallery');\r\n      dispatch(slice.actions.getGallerySuccess(response.data.gallery));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getUserList() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/user/getUsers');\r\n      dispatch(slice.actions.getUserListSuccess(response.data.data));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getCards() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/account/cards');\r\n      dispatch(slice.actions.getCardsSuccess(response.data.cards));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getAddressBook() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/account/address-book');\r\n      dispatch(slice.actions.getAddressBookSuccess(response.data.addressBook));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getInvoices() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/account/invoices');\r\n      dispatch(slice.actions.getInvoicesSuccess(response.data.invoices));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getNotifications() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/account/notifications-settings');\r\n      dispatch(slice.actions.getNotificationsSuccess(response.data.notifications));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getUsers() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/user/all');\r\n      dispatch(slice.actions.getUsersSuccess(response.data.users));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getSpecialPermssionList() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/user/getSpecialPermissions');\r\n      dispatch(slice.actions.getSpecialPermissionListSuccess(response.data.data));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}