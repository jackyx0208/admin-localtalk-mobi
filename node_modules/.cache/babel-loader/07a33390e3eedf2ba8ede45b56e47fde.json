{"ast":null,"code":"import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as Yup from'yup';import{useState}from'react';import{Icon}from'@iconify/react';import{useSnackbar}from'notistack5';import{useFormik,Form,FormikProvider}from'formik';import eyeFill from'@iconify/icons-eva/eye-fill';import closeFill from'@iconify/icons-eva/close-fill';import eyeOffFill from'@iconify/icons-eva/eye-off-fill';// material\nimport{Stack,TextField,IconButton,InputAdornment,Alert}from'@material-ui/core';import{LoadingButton}from'@material-ui/lab';// hooks\nimport useAuth from'../../../hooks/useAuth';import useIsMountedRef from'../../../hooks/useIsMountedRef';//\nimport{MIconButton}from'../../@material-extend';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegisterForm(){var _useAuth=useAuth(),register=_useAuth.register;var isMountedRef=useIsMountedRef();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar,closeSnackbar=_useSnackbar.closeSnackbar;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var RegisterSchema=Yup.object().shape({firstName:Yup.string().min(2,'Too Short!').max(50,'Too Long!').required('First name required'),lastName:Yup.string().min(2,'Too Short!').max(50,'Too Long!').required('Last name required'),email:Yup.string().email('Email must be a valid email address').required('Email is required'),password:Yup.string().required('Password is required')});var formik=useFormik({initialValues:{firstName:'',lastName:'',email:'',password:''},validationSchema:RegisterSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setErrors,setSubmitting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors=_ref.setErrors,setSubmitting=_ref.setSubmitting;_context.prev=1;_context.next=4;return register(values.email,values.password,values.firstName,values.lastName);case 4:enqueueSnackbar('Register success',{variant:'success',action:function action(key){return/*#__PURE__*/_jsx(MIconButton,{size:\"small\",onClick:function onClick(){return closeSnackbar(key);},children:/*#__PURE__*/_jsx(Icon,{icon:closeFill})});}});if(isMountedRef.current){setSubmitting(false);}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);if(isMountedRef.current){setErrors({afterSubmit:_context.t0.message});setSubmitting(false);}case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,touched=formik.touched,handleSubmit=formik.handleSubmit,isSubmitting=formik.isSubmitting,getFieldProps=formik.getFieldProps;return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[errors.afterSubmit&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:errors.afterSubmit}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:2,children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,label:\"First name\"},getFieldProps('firstName')),{},{error:Boolean(touched.firstName&&errors.firstName),helperText:touched.firstName&&errors.firstName})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,label:\"Last name\"},getFieldProps('lastName')),{},{error:Boolean(touched.lastName&&errors.lastName),helperText:touched.lastName&&errors.lastName}))]}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"username\",type:\"email\",label:\"Email address\"},getFieldProps('email')),{},{error:Boolean(touched.email&&errors.email),helperText:touched.email&&errors.email})),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({fullWidth:true,autoComplete:\"current-password\",type:showPassword?'text':'password',label:\"Password\"},getFieldProps('password')),{},{InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",onClick:function onClick(){return setShowPassword(function(prev){return!prev;});},children:/*#__PURE__*/_jsx(Icon,{icon:showPassword?eyeFill:eyeOffFill})})})},error:Boolean(touched.password&&errors.password),helperText:touched.password&&errors.password})),/*#__PURE__*/_jsx(LoadingButton,{fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",loading:isSubmitting,children:\"Register\"})]})})});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/components/authentication/register/RegisterForm.js"],"names":["Yup","useState","Icon","useSnackbar","useFormik","Form","FormikProvider","eyeFill","closeFill","eyeOffFill","Stack","TextField","IconButton","InputAdornment","Alert","LoadingButton","useAuth","useIsMountedRef","MIconButton","RegisterForm","register","isMountedRef","enqueueSnackbar","closeSnackbar","showPassword","setShowPassword","RegisterSchema","object","shape","firstName","string","min","max","required","lastName","email","password","formik","initialValues","validationSchema","onSubmit","values","setErrors","setSubmitting","variant","action","key","current","console","error","afterSubmit","message","errors","touched","handleSubmit","isSubmitting","getFieldProps","xs","sm","Boolean","endAdornment","prev"],"mappings":"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","sourcesContent":["import * as Yup from 'yup';\r\nimport { useState } from 'react';\r\nimport { Icon } from '@iconify/react';\r\nimport { useSnackbar } from 'notistack5';\r\nimport { useFormik, Form, FormikProvider } from 'formik';\r\nimport eyeFill from '@iconify/icons-eva/eye-fill';\r\nimport closeFill from '@iconify/icons-eva/close-fill';\r\nimport eyeOffFill from '@iconify/icons-eva/eye-off-fill';\r\n// material\r\nimport { Stack, TextField, IconButton, InputAdornment, Alert } from '@material-ui/core';\r\nimport { LoadingButton } from '@material-ui/lab';\r\n// hooks\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport useIsMountedRef from '../../../hooks/useIsMountedRef';\r\n//\r\nimport { MIconButton } from '../../@material-extend';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function RegisterForm() {\r\n  const { register } = useAuth();\r\n  const isMountedRef = useIsMountedRef();\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const RegisterSchema = Yup.object().shape({\r\n    firstName: Yup.string().min(2, 'Too Short!').max(50, 'Too Long!').required('First name required'),\r\n    lastName: Yup.string().min(2, 'Too Short!').max(50, 'Too Long!').required('Last name required'),\r\n    email: Yup.string().email('Email must be a valid email address').required('Email is required'),\r\n    password: Yup.string().required('Password is required')\r\n  });\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      password: ''\r\n    },\r\n    validationSchema: RegisterSchema,\r\n    onSubmit: async (values, { setErrors, setSubmitting }) => {\r\n      try {\r\n        await register(values.email, values.password, values.firstName, values.lastName);\r\n        enqueueSnackbar('Register success', {\r\n          variant: 'success',\r\n          action: (key) => (\r\n            <MIconButton size=\"small\" onClick={() => closeSnackbar(key)}>\r\n              <Icon icon={closeFill} />\r\n            </MIconButton>\r\n          )\r\n        });\r\n        if (isMountedRef.current) {\r\n          setSubmitting(false);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (isMountedRef.current) {\r\n          setErrors({ afterSubmit: error.message });\r\n          setSubmitting(false);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  const { errors, touched, handleSubmit, isSubmitting, getFieldProps } = formik;\r\n\r\n  return (\r\n    <FormikProvider value={formik}>\r\n      <Form autoComplete=\"off\" noValidate onSubmit={handleSubmit}>\r\n        <Stack spacing={3}>\r\n          {errors.afterSubmit && <Alert severity=\"error\">{errors.afterSubmit}</Alert>}\r\n\r\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"First name\"\r\n              {...getFieldProps('firstName')}\r\n              error={Boolean(touched.firstName && errors.firstName)}\r\n              helperText={touched.firstName && errors.firstName}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              label=\"Last name\"\r\n              {...getFieldProps('lastName')}\r\n              error={Boolean(touched.lastName && errors.lastName)}\r\n              helperText={touched.lastName && errors.lastName}\r\n            />\r\n          </Stack>\r\n\r\n          <TextField\r\n            fullWidth\r\n            autoComplete=\"username\"\r\n            type=\"email\"\r\n            label=\"Email address\"\r\n            {...getFieldProps('email')}\r\n            error={Boolean(touched.email && errors.email)}\r\n            helperText={touched.email && errors.email}\r\n          />\r\n\r\n          <TextField\r\n            fullWidth\r\n            autoComplete=\"current-password\"\r\n            type={showPassword ? 'text' : 'password'}\r\n            label=\"Password\"\r\n            {...getFieldProps('password')}\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton edge=\"end\" onClick={() => setShowPassword((prev) => !prev)}>\r\n                    <Icon icon={showPassword ? eyeFill : eyeOffFill} />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n            error={Boolean(touched.password && errors.password)}\r\n            helperText={touched.password && errors.password}\r\n          />\r\n\r\n          <LoadingButton fullWidth size=\"large\" type=\"submit\" variant=\"contained\" loading={isSubmitting}>\r\n            Register\r\n          </LoadingButton>\r\n        </Stack>\r\n      </Form>\r\n    </FormikProvider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}