{"ast":null,"code":"import { map, filter } from 'lodash';\nimport { createSlice } from '@reduxjs/toolkit'; // utils\n\nimport axios from '../../utils/axios'; // ----------------------------------------------------------------------\n\nconst initialState = {\n  isLoading: false,\n  error: false,\n  events: [],\n  isOpenModal: false,\n  selectedEventId: null,\n  selectedRange: null\n};\nconst slice = createSlice({\n  name: 'calendar',\n  initialState,\n  reducers: {\n    // START LOADING\n    startLoading(state) {\n      state.isLoading = true;\n    },\n\n    // HAS ERROR\n    hasError(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    // GET EVENTS\n    getEventsSuccess(state, action) {\n      state.isLoading = false;\n      state.events = action.payload;\n    },\n\n    // CREATE EVENT\n    createEventSuccess(state, action) {\n      const newEvent = action.payload;\n      state.isLoading = false;\n      state.events = [...state.events, newEvent];\n    },\n\n    // UPDATE EVENT\n    updateEventSuccess(state, action) {\n      const event = action.payload;\n      const updateEvent = map(state.events, _event => {\n        if (_event.id === event.id) {\n          return event;\n        }\n\n        return _event;\n      });\n      state.isLoading = false;\n      state.events = updateEvent;\n    },\n\n    // DELETE EVENT\n    deleteEventSuccess(state, action) {\n      const {\n        eventId\n      } = action.payload;\n      const deleteEvent = filter(state.events, user => user.id !== eventId);\n      state.isLoading = false;\n      state.events = deleteEvent;\n    },\n\n    // SELECT EVENT\n    selectEvent(state, action) {\n      const eventId = action.payload;\n      state.isOpenModal = true;\n      state.selectedEventId = eventId;\n    },\n\n    // SELECT RANGE\n    selectRange(state, action) {\n      const {\n        start,\n        end\n      } = action.payload;\n      state.isOpenModal = true;\n      state.selectedRange = {\n        start,\n        end\n      };\n    },\n\n    // OPEN MODAL\n    openModal(state) {\n      state.isOpenModal = true;\n    },\n\n    // CLOSE MODAL\n    closeModal(state) {\n      state.isOpenModal = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    }\n\n  }\n}); // Reducer\n\nexport default slice.reducer; // Actions\n\nexport const {\n  openModal,\n  closeModal,\n  selectEvent\n} = slice.actions; // ----------------------------------------------------------------------\n\nexport function getEvents() {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.get('/api/calendar/events');\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function createEvent(newEvent) {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.post('/api/calendar/events/new', newEvent);\n      dispatch(slice.actions.createEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function updateEvent(eventId, updateEvent) {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      const response = await axios.post('/api/calendar/events/update', {\n        eventId,\n        updateEvent\n      });\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function deleteEvent(eventId) {\n  return async dispatch => {\n    dispatch(slice.actions.startLoading());\n\n    try {\n      await axios.post('/api/calendar/events/delete', {\n        eventId\n      });\n      dispatch(slice.actions.deleteEventSuccess({\n        eventId\n      }));\n    } catch (error) {\n      dispatch(slice.actions.hasError(error));\n    }\n  };\n} // ----------------------------------------------------------------------\n\nexport function selectRange(start, end) {\n  return async dispatch => {\n    dispatch(slice.actions.selectRange({\n      start: start.getTime(),\n      end: end.getTime()\n    }));\n  };\n}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/redux/slices/calendar.js"],"names":["map","filter","createSlice","axios","initialState","isLoading","error","events","isOpenModal","selectedEventId","selectedRange","slice","name","reducers","startLoading","state","hasError","action","payload","getEventsSuccess","createEventSuccess","newEvent","updateEventSuccess","event","updateEvent","_event","id","deleteEventSuccess","eventId","deleteEvent","user","selectEvent","selectRange","start","end","openModal","closeModal","reducer","actions","getEvents","dispatch","response","get","data","createEvent","post","getTime"],"mappings":"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","sourcesContent":["import { map, filter } from 'lodash';\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n// utils\r\nimport axios from '../../utils/axios';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  error: false,\r\n  events: [],\r\n  isOpenModal: false,\r\n  selectedEventId: null,\r\n  selectedRange: null\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: 'calendar',\r\n  initialState,\r\n  reducers: {\r\n    // START LOADING\r\n    startLoading(state) {\r\n      state.isLoading = true;\r\n    },\r\n\r\n    // HAS ERROR\r\n    hasError(state, action) {\r\n      state.isLoading = false;\r\n      state.error = action.payload;\r\n    },\r\n\r\n    // GET EVENTS\r\n    getEventsSuccess(state, action) {\r\n      state.isLoading = false;\r\n      state.events = action.payload;\r\n    },\r\n\r\n    // CREATE EVENT\r\n    createEventSuccess(state, action) {\r\n      const newEvent = action.payload;\r\n      state.isLoading = false;\r\n      state.events = [...state.events, newEvent];\r\n    },\r\n\r\n    // UPDATE EVENT\r\n    updateEventSuccess(state, action) {\r\n      const event = action.payload;\r\n      const updateEvent = map(state.events, (_event) => {\r\n        if (_event.id === event.id) {\r\n          return event;\r\n        }\r\n        return _event;\r\n      });\r\n\r\n      state.isLoading = false;\r\n      state.events = updateEvent;\r\n    },\r\n\r\n    // DELETE EVENT\r\n    deleteEventSuccess(state, action) {\r\n      const { eventId } = action.payload;\r\n      const deleteEvent = filter(state.events, (user) => user.id !== eventId);\r\n      state.isLoading = false;\r\n      state.events = deleteEvent;\r\n    },\r\n\r\n    // SELECT EVENT\r\n    selectEvent(state, action) {\r\n      const eventId = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedEventId = eventId;\r\n    },\r\n\r\n    // SELECT RANGE\r\n    selectRange(state, action) {\r\n      const { start, end } = action.payload;\r\n      state.isOpenModal = true;\r\n      state.selectedRange = { start, end };\r\n    },\r\n\r\n    // OPEN MODAL\r\n    openModal(state) {\r\n      state.isOpenModal = true;\r\n    },\r\n\r\n    // CLOSE MODAL\r\n    closeModal(state) {\r\n      state.isOpenModal = false;\r\n      state.selectedEventId = null;\r\n      state.selectedRange = null;\r\n    }\r\n  }\r\n});\r\n\r\n// Reducer\r\nexport default slice.reducer;\r\n\r\n// Actions\r\nexport const { openModal, closeModal, selectEvent } = slice.actions;\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function getEvents() {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.get('/api/calendar/events');\r\n      dispatch(slice.actions.getEventsSuccess(response.data.events));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function createEvent(newEvent) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/new', newEvent);\r\n      dispatch(slice.actions.createEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function updateEvent(eventId, updateEvent) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      const response = await axios.post('/api/calendar/events/update', {\r\n        eventId,\r\n        updateEvent\r\n      });\r\n      dispatch(slice.actions.updateEventSuccess(response.data.event));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function deleteEvent(eventId) {\r\n  return async (dispatch) => {\r\n    dispatch(slice.actions.startLoading());\r\n    try {\r\n      await axios.post('/api/calendar/events/delete', { eventId });\r\n      dispatch(slice.actions.deleteEventSuccess({ eventId }));\r\n    } catch (error) {\r\n      dispatch(slice.actions.hasError(error));\r\n    }\r\n  };\r\n}\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport function selectRange(start, end) {\r\n  return async (dispatch) => {\r\n    dispatch(\r\n      slice.actions.selectRange({\r\n        start: start.getTime(),\r\n        end: end.getTime()\r\n      })\r\n    );\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}