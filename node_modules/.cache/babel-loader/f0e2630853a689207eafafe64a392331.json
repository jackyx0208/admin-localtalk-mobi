{"ast":null,"code":"import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Icon}from'@iconify/react';import{useSnackbar}from'notistack5';import{useRef,useState}from'react';import homeFill from'@iconify/icons-eva/home-fill';import personFill from'@iconify/icons-eva/person-fill';import settings2Fill from'@iconify/icons-eva/settings-2-fill';import{Link as RouterLink,useNavigate}from'react-router-dom';// material\nimport{alpha}from'@material-ui/core/styles';import{Button,Box,Divider,MenuItem,Typography}from'@material-ui/core';// routes\nimport{PATH_DASHBOARD}from'../../routes/paths';// hooks\nimport useAuth from'../../hooks/useAuth';import useIsMountedRef from'../../hooks/useIsMountedRef';// components\nimport{MIconButton}from'../../components/@material-extend';import MyAvatar from'../../components/MyAvatar';import MenuPopover from'../../components/MenuPopover';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MENU_OPTIONS=[{label:'Home',icon:homeFill,linkTo:'/'},{label:'Profile',icon:personFill,linkTo:PATH_DASHBOARD.user.profile},{label:'Settings',icon:settings2Fill,linkTo:PATH_DASHBOARD.user.account}];// ----------------------------------------------------------------------\nexport default function AccountPopover(){var anchorRef=useRef(null);var navigate=useNavigate();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var isMountedRef=useIsMountedRef();var _useAuth=useAuth(),user=_useAuth.user,logout=_useAuth.logout;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return logout();case 3:navigate('/');if(isMountedRef.current){handleClose();}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);enqueueSnackbar('Unable to logout',{variant:'error'});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function handleLogout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MIconButton,{ref:anchorRef,onClick:handleOpen,sx:_objectSpread({padding:0,width:44,height:44},open&&{'&:before':{zIndex:1,content:\"''\",width:'100%',height:'100%',borderRadius:'50%',position:'absolute',bgcolor:function bgcolor(theme){return alpha(theme.palette.grey[900],0.72);}}}),children:/*#__PURE__*/_jsx(MyAvatar,{})}),/*#__PURE__*/_jsxs(MenuPopover,{open:open,onClose:handleClose,anchorEl:anchorRef.current,sx:{width:220},children:[/*#__PURE__*/_jsxs(Box,{sx:{my:1.5,px:2.5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",noWrap:true,children:user.displayName}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'text.secondary'},noWrap:true,children:user.email})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:1}}),MENU_OPTIONS.map(function(option){return/*#__PURE__*/_jsxs(MenuItem,{to:option.linkTo,component:RouterLink,onClick:handleClose,sx:{typography:'body2',py:1,px:2.5},children:[/*#__PURE__*/_jsx(Box,{component:Icon,icon:option.icon,sx:{mr:2,width:24,height:24}}),option.label]},option.label);}),/*#__PURE__*/_jsx(Box,{sx:{p:2,pt:1.5},children:/*#__PURE__*/_jsx(Button,{fullWidth:true,color:\"inherit\",variant:\"outlined\",onClick:handleLogout,children:\"Logout\"})})]})]});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/layouts/dashboard/AccountPopover.js"],"names":["Icon","useSnackbar","useRef","useState","homeFill","personFill","settings2Fill","Link","RouterLink","useNavigate","alpha","Button","Box","Divider","MenuItem","Typography","PATH_DASHBOARD","useAuth","useIsMountedRef","MIconButton","MyAvatar","MenuPopover","MENU_OPTIONS","label","icon","linkTo","user","profile","account","AccountPopover","anchorRef","navigate","enqueueSnackbar","isMountedRef","logout","open","setOpen","handleOpen","handleClose","handleLogout","current","console","error","variant","padding","width","height","zIndex","content","borderRadius","position","bgcolor","theme","palette","grey","my","px","displayName","color","email","map","option","typography","py","mr","p","pt"],"mappings":"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","sourcesContent":["import { Icon } from '@iconify/react';\r\nimport { useSnackbar } from 'notistack5';\r\nimport { useRef, useState } from 'react';\r\nimport homeFill from '@iconify/icons-eva/home-fill';\r\nimport personFill from '@iconify/icons-eva/person-fill';\r\nimport settings2Fill from '@iconify/icons-eva/settings-2-fill';\r\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\r\n// material\r\nimport { alpha } from '@material-ui/core/styles';\r\nimport { Button, Box, Divider, MenuItem, Typography } from '@material-ui/core';\r\n// routes\r\nimport { PATH_DASHBOARD } from '../../routes/paths';\r\n// hooks\r\nimport useAuth from '../../hooks/useAuth';\r\nimport useIsMountedRef from '../../hooks/useIsMountedRef';\r\n// components\r\nimport { MIconButton } from '../../components/@material-extend';\r\nimport MyAvatar from '../../components/MyAvatar';\r\nimport MenuPopover from '../../components/MenuPopover';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst MENU_OPTIONS = [\r\n  {\r\n    label: 'Home',\r\n    icon: homeFill,\r\n    linkTo: '/'\r\n  },\r\n  {\r\n    label: 'Profile',\r\n    icon: personFill,\r\n    linkTo: PATH_DASHBOARD.user.profile\r\n  },\r\n  {\r\n    label: 'Settings',\r\n    icon: settings2Fill,\r\n    linkTo: PATH_DASHBOARD.user.account\r\n  }\r\n];\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function AccountPopover() {\r\n  const anchorRef = useRef(null);\r\n  const navigate = useNavigate();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const isMountedRef = useIsMountedRef();\r\n  const { user, logout } = useAuth();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout();\r\n      navigate('/');\r\n      if (isMountedRef.current) {\r\n        handleClose();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      enqueueSnackbar('Unable to logout', { variant: 'error' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MIconButton\r\n        ref={anchorRef}\r\n        onClick={handleOpen}\r\n        sx={{\r\n          padding: 0,\r\n          width: 44,\r\n          height: 44,\r\n          ...(open && {\r\n            '&:before': {\r\n              zIndex: 1,\r\n              content: \"''\",\r\n              width: '100%',\r\n              height: '100%',\r\n              borderRadius: '50%',\r\n              position: 'absolute',\r\n              bgcolor: (theme) => alpha(theme.palette.grey[900], 0.72)\r\n            }\r\n          })\r\n        }}\r\n      >\r\n        <MyAvatar />\r\n      </MIconButton>\r\n\r\n      <MenuPopover open={open} onClose={handleClose} anchorEl={anchorRef.current} sx={{ width: 220 }}>\r\n        <Box sx={{ my: 1.5, px: 2.5 }}>\r\n          <Typography variant=\"subtitle1\" noWrap>\r\n            {user.displayName}\r\n          </Typography>\r\n          <Typography variant=\"body2\" sx={{ color: 'text.secondary' }} noWrap>\r\n            {user.email}\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Divider sx={{ my: 1 }} />\r\n\r\n        {MENU_OPTIONS.map((option) => (\r\n          <MenuItem\r\n            key={option.label}\r\n            to={option.linkTo}\r\n            component={RouterLink}\r\n            onClick={handleClose}\r\n            sx={{ typography: 'body2', py: 1, px: 2.5 }}\r\n          >\r\n            <Box\r\n              component={Icon}\r\n              icon={option.icon}\r\n              sx={{\r\n                mr: 2,\r\n                width: 24,\r\n                height: 24\r\n              }}\r\n            />\r\n\r\n            {option.label}\r\n          </MenuItem>\r\n        ))}\r\n\r\n        <Box sx={{ p: 2, pt: 1.5 }}>\r\n          <Button fullWidth color=\"inherit\" variant=\"outlined\" onClick={handleLogout}>\r\n            Logout\r\n          </Button>\r\n        </Box>\r\n      </MenuPopover>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}