{"ast":null,"code":"import _objectSpread from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useSnackbar}from'notistack5';import{useNavigate}from'react-router-dom';import{Form,FormikProvider,useFormik}from'formik';import{Box,Card,Grid,Stack,Switch,TextField,Typography,FormHelperText,FormControlLabel,Avatar}from'@material-ui/core';// utils\nimport axios from'../../../utils/axios';import fakeRequest from'../../../utils/fakeRequest';// routes\nimport{PATH_DASHBOARD}from'../../../routes/paths';//\nimport Label from'../../Label';import{serverConfig}from'../../../config';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function UserDetailsForm(_ref){var currentUser=_ref.currentUser,userSpecialPermissions=_ref.userSpecialPermissions,parameterSettings=_ref.parameterSettings;var navigate=useNavigate();var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var role=currentUser?(currentUser.role==='user'||currentUser.role==='s-user')&&userSpecialPermissions&&'s-user'||currentUser.role:'';var displayMaxCoverage=userSpecialPermissions&&userSpecialPermissions.max_coverage||parameterSettings&&parameterSettings.settings.default_coverage||150;var formik=useFormik({enableReinitialize:true,initialValues:{name:(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'',email:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'',password:'',gender:currentUser&&currentUser.gender>-1?currentUser.gender:'',role:role||'',coverage:(currentUser===null||currentUser===void 0?void 0:currentUser.coverage)||50,max_coverage:displayMaxCoverage,location:currentUser?\"\".concat(currentUser.location.coordinates[1],\", \").concat(currentUser.location.coordinates[0]):'',fixedLocation:(currentUser===null||currentUser===void 0?void 0:currentUser.fixedLocation)||'',phoneNumber:(currentUser===null||currentUser===void 0?void 0:currentUser.phoneNumber)||'',address:(currentUser===null||currentUser===void 0?void 0:currentUser.address)||'',country:(currentUser===null||currentUser===void 0?void 0:currentUser.country)||'',state:(currentUser===null||currentUser===void 0?void 0:currentUser.state)||'',city:(currentUser===null||currentUser===void 0?void 0:currentUser.city)||'',zipCode:(currentUser===null||currentUser===void 0?void 0:currentUser.zipCode)||'',avatarUrl:currentUser&&\"\".concat(serverConfig.baseUrl,\"/user/img-src/\").concat(currentUser.avatarUrl)||null,isVerified:(currentUser===null||currentUser===void 0?void 0:currentUser.isVerified)||true,status:currentUser===null||currentUser===void 0?void 0:currentUser.status,online:(currentUser===null||currentUser===void 0?void 0:currentUser.online)||false,onlineStatus:(currentUser===null||currentUser===void 0?void 0:currentUser.online)&&'online'||'offline',username:(currentUser===null||currentUser===void 0?void 0:currentUser.username)||'',note:(currentUser===null||currentUser===void 0?void 0:currentUser.note)||'',credit:(currentUser===null||currentUser===void 0?void 0:currentUser.credit)||'0 %',balance:(currentUser===null||currentUser===void 0?void 0:currentUser.balance)||'$ 0'},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref2){var setSubmitting,resetForm,setErrors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref2.setSubmitting,resetForm=_ref2.resetForm,setErrors=_ref2.setErrors;_context.prev=1;_context.next=4;return fakeRequest(500);case 4:_context.next=6;return axios.put(\"/user/manage-users?username=\".concat(values.username),values);case 6:resetForm();setSubmitting(false);enqueueSnackbar('Update success',{variant:'success'});navigate(PATH_DASHBOARD.user.list);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setSubmitting(false);setErrors(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var errors=formik.errors,values=formik.values,touched=formik.touched,handleSubmit=formik.handleSubmit,setFieldValue=formik.setFieldValue,getFieldProps=formik.getFieldProps;return/*#__PURE__*/_jsx(FormikProvider,{value:formik,children:/*#__PURE__*/_jsx(Form,{noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Card,{sx:{py:10,px:3},children:[/*#__PURE__*/_jsx(Label,{color:values.status!=='active'?'error':'success',sx:{textTransform:'uppercase',position:'absolute',top:24,right:24},children:values.status}),/*#__PURE__*/_jsxs(Box,{sx:{mb:5},children:[/*#__PURE__*/_jsx(Avatar,{src:values.avatarUrl}),/*#__PURE__*/_jsx(FormHelperText,{error:true,sx:{px:2,textAlign:'center'},children:touched.avatarUrl&&errors.avatarUrl})]}),/*#__PURE__*/_jsx(FormControlLabel,{labelPlacement:\"start\",control:/*#__PURE__*/_jsx(Switch,{disabled:true,onChange:function onChange(event){return setFieldValue('status',event.target.checked?'banned':'active');},checked:values.status!=='active'}),label:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:0.5},children:\"Banned\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'text.secondary'},children:\"Apply disable account\"})]}),sx:{mx:0,mb:3,width:1,justifyContent:'space-between'}}),/*#__PURE__*/_jsx(FormControlLabel,{labelPlacement:\"start\",control:/*#__PURE__*/_jsx(Switch,_objectSpread(_objectSpread({disabled:true},getFieldProps('isVerified')),{},{checked:values.isVerified})),label:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{mb:0.5},children:\"Email Verified\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'text.secondary'},children:\"Disabling this will automatically send the user a verification email\"})]}),sx:{mx:0,width:1,justifyContent:'space-between'}})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(Card,{sx:{p:3},children:/*#__PURE__*/_jsxs(Stack,{spacing:3,children:[/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,inputProps:{readOnly:true},fullWidth:true,label:\"Email\"},getFieldProps('email'))),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,inputProps:{readOnly:true},fullWidth:true,label:\"Nickname\"},getFieldProps('name')))]}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsxs(TextField,_objectSpread(_objectSpread({select:true,fullWidth:true,label:\"Gender\"},getFieldProps('gender')),{},{SelectProps:{native:true},disabled:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Male\"},\"male\"),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Female\"},\"female\"),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Business\"},\"business\")]})),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Role\"},getFieldProps('role')))]}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Credit\"},getFieldProps('credit'))),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Balance\"},getFieldProps('balance')))]}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Status\"},getFieldProps('onlineStatus'))),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Punishment\"},getFieldProps('punishment')))]}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Coverage\"},getFieldProps('coverage'))),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Max Coverage\"},getFieldProps('max_coverage')))]}),/*#__PURE__*/_jsxs(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:[/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Location\"},getFieldProps('country'))),/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Latitude and logintude\"},getFieldProps('location')))]}),/*#__PURE__*/_jsx(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Registration Date\"},getFieldProps('created')))}),/*#__PURE__*/_jsx(Stack,{direction:{xs:'column',sm:'row'},spacing:{xs:3,sm:2},children:/*#__PURE__*/_jsx(TextField,_objectSpread({disabled:true,fullWidth:true,label:\"Note\",multiline:true,minRows:4,maxRows:4},getFieldProps('note')))})]})})})]})})});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/components/_dashboard/user/UserDetailsForm.js"],"names":["useSnackbar","useNavigate","Form","FormikProvider","useFormik","Box","Card","Grid","Stack","Switch","TextField","Typography","FormHelperText","FormControlLabel","Avatar","axios","fakeRequest","PATH_DASHBOARD","Label","serverConfig","UserDetailsForm","currentUser","userSpecialPermissions","parameterSettings","navigate","enqueueSnackbar","role","displayMaxCoverage","max_coverage","settings","default_coverage","formik","enableReinitialize","initialValues","name","email","password","gender","coverage","location","coordinates","fixedLocation","phoneNumber","address","country","state","city","zipCode","avatarUrl","baseUrl","isVerified","status","online","onlineStatus","username","note","credit","balance","onSubmit","values","setSubmitting","resetForm","setErrors","put","variant","user","list","console","error","errors","touched","handleSubmit","setFieldValue","getFieldProps","py","px","textTransform","position","top","right","mb","textAlign","event","target","checked","color","mx","width","justifyContent","p","xs","sm","readOnly","native"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport { useSnackbar } from 'notistack5';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Form, FormikProvider, useFormik } from 'formik';\r\nimport {\r\n  Box,\r\n  Card,\r\n  Grid,\r\n  Stack,\r\n  Switch,\r\n  TextField,\r\n  Typography,\r\n  FormHelperText,\r\n  FormControlLabel,\r\n  Avatar\r\n} from '@material-ui/core';\r\n// utils\r\nimport axios from '../../../utils/axios';\r\nimport fakeRequest from '../../../utils/fakeRequest';\r\n// routes\r\nimport { PATH_DASHBOARD } from '../../../routes/paths';\r\n//\r\nimport Label from '../../Label';\r\nimport { serverConfig } from '../../../config';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nUserDetailsForm.propTypes = {\r\n  currentUser: PropTypes.object,\r\n  userSpecialPermissions: PropTypes.object,\r\n  parameterSettings: PropTypes.object\r\n};\r\n\r\nexport default function UserDetailsForm({ currentUser, userSpecialPermissions, parameterSettings }) {\r\n  const navigate = useNavigate();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const role = currentUser\r\n    ? ((currentUser.role === 'user' || currentUser.role === 's-user') && userSpecialPermissions && 's-user') ||\r\n      currentUser.role\r\n    : '';\r\n  const displayMaxCoverage =\r\n    (userSpecialPermissions && userSpecialPermissions.max_coverage) ||\r\n    (parameterSettings && parameterSettings.settings.default_coverage) ||\r\n    150;\r\n\r\n  const formik = useFormik({\r\n    enableReinitialize: true,\r\n    initialValues: {\r\n      name: currentUser?.name || '',\r\n      email: currentUser?.email || '',\r\n      password: '',\r\n      gender: currentUser && currentUser.gender > -1 ? currentUser.gender : '',\r\n      role: role || '',\r\n      coverage: currentUser?.coverage || 50,\r\n      max_coverage: displayMaxCoverage,\r\n      location: currentUser ? `${currentUser.location.coordinates[1]}, ${currentUser.location.coordinates[0]}` : '',\r\n      fixedLocation: currentUser?.fixedLocation || '',\r\n      phoneNumber: currentUser?.phoneNumber || '',\r\n      address: currentUser?.address || '',\r\n      country: currentUser?.country || '',\r\n      state: currentUser?.state || '',\r\n      city: currentUser?.city || '',\r\n      zipCode: currentUser?.zipCode || '',\r\n      avatarUrl: (currentUser && `${serverConfig.baseUrl}/user/img-src/${currentUser.avatarUrl}`) || null,\r\n      isVerified: currentUser?.isVerified || true,\r\n      status: currentUser?.status,\r\n      online: currentUser?.online || false,\r\n      onlineStatus: (currentUser?.online && 'online') || 'offline',\r\n      username: currentUser?.username || '',\r\n      note: currentUser?.note || '',\r\n      credit: currentUser?.credit || '0 %',\r\n      balance: currentUser?.balance || '$ 0'\r\n    },\r\n    onSubmit: async (values, { setSubmitting, resetForm, setErrors }) => {\r\n      try {\r\n        await fakeRequest(500);\r\n\r\n        await axios.put(`/user/manage-users?username=${values.username}`, values);\r\n\r\n        resetForm();\r\n        setSubmitting(false);\r\n        enqueueSnackbar('Update success', { variant: 'success' });\r\n        navigate(PATH_DASHBOARD.user.list);\r\n      } catch (error) {\r\n        console.error(error);\r\n        setSubmitting(false);\r\n        setErrors(error);\r\n      }\r\n    }\r\n  });\r\n\r\n  const { errors, values, touched, handleSubmit, setFieldValue, getFieldProps } = formik;\r\n\r\n  return (\r\n    <FormikProvider value={formik}>\r\n      <Form noValidate autoComplete=\"off\" onSubmit={handleSubmit}>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} md={4}>\r\n            <Card sx={{ py: 10, px: 3 }}>\r\n              <Label\r\n                color={values.status !== 'active' ? 'error' : 'success'}\r\n                sx={{ textTransform: 'uppercase', position: 'absolute', top: 24, right: 24 }}\r\n              >\r\n                {values.status}\r\n              </Label>\r\n\r\n              <Box sx={{ mb: 5 }}>\r\n                <Avatar src={values.avatarUrl} />\r\n                <FormHelperText error sx={{ px: 2, textAlign: 'center' }}>\r\n                  {touched.avatarUrl && errors.avatarUrl}\r\n                </FormHelperText>\r\n              </Box>\r\n\r\n              <FormControlLabel\r\n                labelPlacement=\"start\"\r\n                control={\r\n                  <Switch\r\n                    disabled\r\n                    onChange={(event) => setFieldValue('status', event.target.checked ? 'banned' : 'active')}\r\n                    checked={values.status !== 'active'}\r\n                  />\r\n                }\r\n                label={\r\n                  <>\r\n                    <Typography variant=\"subtitle2\" sx={{ mb: 0.5 }}>\r\n                      Banned\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n                      Apply disable account\r\n                    </Typography>\r\n                  </>\r\n                }\r\n                sx={{ mx: 0, mb: 3, width: 1, justifyContent: 'space-between' }}\r\n              />\r\n\r\n              <FormControlLabel\r\n                labelPlacement=\"start\"\r\n                control={<Switch disabled {...getFieldProps('isVerified')} checked={values.isVerified} />}\r\n                label={\r\n                  <>\r\n                    <Typography variant=\"subtitle2\" sx={{ mb: 0.5 }}>\r\n                      Email Verified\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\r\n                      Disabling this will automatically send the user a verification email\r\n                    </Typography>\r\n                  </>\r\n                }\r\n                sx={{ mx: 0, width: 1, justifyContent: 'space-between' }}\r\n              />\r\n            </Card>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} md={8}>\r\n            <Card sx={{ p: 3 }}>\r\n              <Stack spacing={3}>\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField\r\n                    disabled\r\n                    inputProps={{ readOnly: true }}\r\n                    fullWidth\r\n                    label=\"Email\"\r\n                    {...getFieldProps('email')}\r\n                  />\r\n                  <TextField\r\n                    disabled\r\n                    inputProps={{ readOnly: true }}\r\n                    fullWidth\r\n                    label=\"Nickname\"\r\n                    {...getFieldProps('name')}\r\n                  />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField\r\n                    select\r\n                    fullWidth\r\n                    label=\"Gender\"\r\n                    {...getFieldProps('gender')}\r\n                    SelectProps={{ native: true }}\r\n                    disabled\r\n                  >\r\n                    <option value=\"\" />\r\n                    <option key=\"male\" value=\"0\">\r\n                      Male\r\n                    </option>\r\n                    <option key=\"female\" value=\"1\">\r\n                      Female\r\n                    </option>\r\n                    <option key=\"business\" value=\"2\">\r\n                      Business\r\n                    </option>\r\n                  </TextField>\r\n                  <TextField disabled fullWidth label=\"Role\" {...getFieldProps('role')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField disabled fullWidth label=\"Credit\" {...getFieldProps('credit')} />\r\n                  <TextField disabled fullWidth label=\"Balance\" {...getFieldProps('balance')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField disabled fullWidth label=\"Status\" {...getFieldProps('onlineStatus')} />\r\n                  <TextField disabled fullWidth label=\"Punishment\" {...getFieldProps('punishment')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField disabled fullWidth label=\"Coverage\" {...getFieldProps('coverage')} />\r\n                  <TextField disabled fullWidth label=\"Max Coverage\" {...getFieldProps('max_coverage')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField disabled fullWidth label=\"Location\" {...getFieldProps('country')} />\r\n                  <TextField disabled fullWidth label=\"Latitude and logintude\" {...getFieldProps('location')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField disabled fullWidth label=\"Registration Date\" {...getFieldProps('created')} />\r\n                </Stack>\r\n\r\n                <Stack direction={{ xs: 'column', sm: 'row' }} spacing={{ xs: 3, sm: 2 }}>\r\n                  <TextField\r\n                    disabled\r\n                    fullWidth\r\n                    label=\"Note\"\r\n                    multiline\r\n                    minRows={4}\r\n                    maxRows={4}\r\n                    {...getFieldProps('note')}\r\n                  />\r\n                </Stack>\r\n              </Stack>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      </Form>\r\n    </FormikProvider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}