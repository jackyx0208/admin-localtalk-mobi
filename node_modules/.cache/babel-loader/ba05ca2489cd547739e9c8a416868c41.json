{"ast":null,"code":"import _regeneratorRuntime from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';// material\nimport{Container,Grid,Box,TextField,Typography}from'@material-ui/core';import{format}from'date-fns';// hooks\nimport useAuth from'../../hooks/useAuth';import useSettings from'../../hooks/useSettings';// components\nimport Page from'../../components/Page';import{AppWelcome,AppWidgets1,AppWidgets2,AppFeatured,AppNewInvoice,AppTopAuthors,AppTopRelated,AppAreaInstalled,AppTotalDownloads,AppTotalInstalled,AppCurrentDownload,AppTotalActiveUsers,AppTotalRegisterUsers,AppTotalOnlineVisitors,AppTotalChart,AppTopInstalledCountries}from'../../components/_dashboard/general-app';import axios from'../../utils/axios';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function GeneralApp(){var _useSettings=useSettings(),themeStretch=_useSettings.themeStretch;var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),totalUsers=_React$useState2[0],setTotalUsers=_React$useState2[1];var _React$useState3=React.useState(0),_React$useState4=_slicedToArray(_React$useState3,2),totalRegisteredUsers=_React$useState4[0],setTotalRegisteredUsers=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),totalOnlineVisitors=_React$useState6[0],setTotalOnlineVisitors=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),totalInstalled=_React$useState8[0],setTotalInstalled=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),totalDownloads=_React$useState10[0],setTotalDownloads=_React$useState10[1];var _React$useState11=React.useState(format(new Date(),'yyyy-MM-dd')),_React$useState12=_slicedToArray(_React$useState11,2),selectedDate=_React$useState12[0],setSelectedDate=_React$useState12[1];var _useAuth=useAuth(),user=_useAuth.user;var handleDateChange=function handleDateChange(e){setSelectedDate(e.target.value);};React.useEffect(function(){function getAnalytics(){return _getAnalytics.apply(this,arguments);}function _getAnalytics(){_getAnalytics=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!selectedDate){_context.next=12;break;}_context.next=3;return axios.get(\"/analytics/logs/\".concat(selectedDate));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!data.error){_context.next=10;break;}console.log(data);setTotalRegisteredUsers(0);setTotalOnlineVisitors(0);return _context.abrupt(\"return\");case 10:// setTotalUsers(data.logs.active_user_num);\nsetTotalRegisteredUsers(data.logs.register_user_num);setTotalOnlineVisitors(data.logs.online_user_num);// setTotalInstalled(data.statistics.installs);\n// setTotalDownloads(data.statistics.maxInstalls);\ncase 12:case\"end\":return _context.stop();}}},_callee);}));return _getAnalytics.apply(this,arguments);}getAnalytics();},[selectedDate]);return/*#__PURE__*/_jsx(Page,{title:\"App | Locals\",children:/*#__PURE__*/_jsxs(Container,{maxWidth:themeStretch?false:'xl',children:[/*#__PURE__*/_jsx(Box,{sx:{pb:5},children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Hi, Welcome back\"})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,children:/*#__PURE__*/_jsx(TextField,{name:\"date\",label:\"Date\",InputLabelProps:{shrink:true,required:true},type:\"date\",onChange:handleDateChange,defaultValue:selectedDate})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(AppTotalOnlineVisitors,{totalUsers:totalOnlineVisitors})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(AppTotalRegisterUsers,{totalUsers:totalRegisteredUsers})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:12,lg:12,children:/*#__PURE__*/_jsx(AppTotalChart,{chartDate:selectedDate})})]})]})});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/pages/dashboard/GeneralApp.js"],"names":["React","Container","Grid","Box","TextField","Typography","format","useAuth","useSettings","Page","AppWelcome","AppWidgets1","AppWidgets2","AppFeatured","AppNewInvoice","AppTopAuthors","AppTopRelated","AppAreaInstalled","AppTotalDownloads","AppTotalInstalled","AppCurrentDownload","AppTotalActiveUsers","AppTotalRegisterUsers","AppTotalOnlineVisitors","AppTotalChart","AppTopInstalledCountries","axios","GeneralApp","themeStretch","useState","totalUsers","setTotalUsers","totalRegisteredUsers","setTotalRegisteredUsers","totalOnlineVisitors","setTotalOnlineVisitors","totalInstalled","setTotalInstalled","totalDownloads","setTotalDownloads","Date","selectedDate","setSelectedDate","user","handleDateChange","e","target","value","useEffect","getAnalytics","get","data","error","console","log","logs","register_user_num","online_user_num","pb","shrink","required"],"mappings":"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","sourcesContent":["import React from 'react';\r\n// material\r\nimport { Container, Grid, Box, TextField, Typography } from '@material-ui/core';\r\nimport { format } from 'date-fns';\r\n// hooks\r\nimport useAuth from '../../hooks/useAuth';\r\nimport useSettings from '../../hooks/useSettings';\r\n// components\r\nimport Page from '../../components/Page';\r\nimport {\r\n  AppWelcome,\r\n  AppWidgets1,\r\n  AppWidgets2,\r\n  AppFeatured,\r\n  AppNewInvoice,\r\n  AppTopAuthors,\r\n  AppTopRelated,\r\n  AppAreaInstalled,\r\n  AppTotalDownloads,\r\n  AppTotalInstalled,\r\n  AppCurrentDownload,\r\n  AppTotalActiveUsers,\r\n  AppTotalRegisterUsers,\r\n  AppTotalOnlineVisitors,\r\n  AppTotalChart,\r\n  AppTopInstalledCountries\r\n} from '../../components/_dashboard/general-app';\r\nimport axios from '../../utils/axios';\r\n// ----------------------------------------------------------------------\r\n\r\nexport default function GeneralApp() {\r\n  const { themeStretch } = useSettings();\r\n  const [totalUsers, setTotalUsers] = React.useState(0);\r\n  const [totalRegisteredUsers, setTotalRegisteredUsers] = React.useState(0);\r\n  const [totalOnlineVisitors, setTotalOnlineVisitors] = React.useState(0);\r\n  const [totalInstalled, setTotalInstalled] = React.useState(0);\r\n  const [totalDownloads, setTotalDownloads] = React.useState(0);\r\n  const [selectedDate, setSelectedDate] = React.useState(format(new Date(), 'yyyy-MM-dd'));\r\n  const { user } = useAuth();\r\n\r\n  const handleDateChange = (e) => {\r\n    setSelectedDate(e.target.value);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    async function getAnalytics() {\r\n      if (selectedDate) {\r\n        const { data } = await axios.get(`/analytics/logs/${selectedDate}`);\r\n        if (data.error) {\r\n          console.log(data);\r\n          setTotalRegisteredUsers(0);\r\n          setTotalOnlineVisitors(0);\r\n          return;\r\n        }\r\n        // setTotalUsers(data.logs.active_user_num);\r\n        setTotalRegisteredUsers(data.logs.register_user_num);\r\n        setTotalOnlineVisitors(data.logs.online_user_num);\r\n        // setTotalInstalled(data.statistics.installs);\r\n        // setTotalDownloads(data.statistics.maxInstalls);\r\n      }\r\n    }\r\n    getAnalytics();\r\n  }, [selectedDate]);\r\n\r\n  return (\r\n    <Page title=\"App | Locals\">\r\n      <Container maxWidth={themeStretch ? false : 'xl'}>\r\n        <Box sx={{ pb: 5 }}>\r\n          <Typography variant=\"h4\">Hi, Welcome back</Typography>\r\n        </Box>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} md={12}>\r\n            <TextField\r\n              name=\"date\"\r\n              label=\"Date\"\r\n              InputLabelProps={{ shrink: true, required: true }}\r\n              type=\"date\"\r\n              onChange={handleDateChange}\r\n              defaultValue={selectedDate}\r\n            />\r\n          </Grid>\r\n          {/* <Grid item xs={12} md={4}>\r\n            <AppTotalActiveUsers totalUsers={totalUsers} />\r\n          </Grid> */}\r\n\r\n          <Grid item xs={12} md={4}>\r\n            <AppTotalOnlineVisitors totalUsers={totalOnlineVisitors} />\r\n          </Grid>\r\n\r\n          <Grid item xs={12} md={4}>\r\n            <AppTotalRegisterUsers totalUsers={totalRegisteredUsers} />\r\n          </Grid>\r\n\r\n          {/* <Grid item xs={12} md={4}>\r\n            <AppTotalInstalled totalInstalled={totalInstalled} />\r\n          </Grid> */}\r\n\r\n          {/* <Grid item xs={12} md={4}>\r\n            <AppTotalDownloads totalDownloads={totalDownloads} />\r\n          </Grid> */}\r\n\r\n          <Grid item xs={12} md={12} lg={12}>\r\n            <AppTotalChart chartDate={selectedDate} />\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Page>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}