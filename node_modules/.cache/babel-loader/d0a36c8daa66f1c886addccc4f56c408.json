{"ast":null,"code":"import _slicedToArray from\"E:/projects/localtalk.mobi/mobilechat-adminpanel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{Navigate,useLocation}from'react-router-dom';// hooks\nimport useAuth from'../hooks/useAuth';// pages\nimport Login from'../pages/authentication/Login';// ----------------------------------------------------------------------\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AuthGuard(_ref){var children=_ref.children;var _useAuth=useAuth(),isAuthenticated=_useAuth.isAuthenticated;var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),requestedLocation=_useState2[0],setRequestedLocation=_useState2[1];if(!isAuthenticated){if(pathname!==requestedLocation){setRequestedLocation(pathname);}return/*#__PURE__*/_jsx(Navigate,{to:\"/auth/login\"});}if(requestedLocation&&pathname!==requestedLocation){setRequestedLocation(null);return/*#__PURE__*/_jsx(Navigate,{to:requestedLocation});}return/*#__PURE__*/_jsx(_Fragment,{children:children});}","map":{"version":3,"sources":["E:/projects/localtalk.mobi/mobilechat-adminpanel/src/guards/AuthGuard.js"],"names":["useState","Navigate","useLocation","useAuth","Login","AuthGuard","children","isAuthenticated","pathname","requestedLocation","setRequestedLocation"],"mappings":"uKAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,kBAAtC,CAEA;AACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA;AACA,MAAOC,CAAAA,KAAP,KAAkB,+BAAlB,CAEA;gGAMA,cAAe,SAASC,CAAAA,SAAT,MAAiC,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CAC9C,aAA4BH,OAAO,EAAnC,CAAQI,eAAR,UAAQA,eAAR,CACA,iBAAqBL,WAAW,EAAhC,CAAQM,QAAR,cAAQA,QAAR,CACA,cAAkDR,QAAQ,CAAC,IAAD,CAA1D,wCAAOS,iBAAP,eAA0BC,oBAA1B,eAEA,GAAI,CAACH,eAAL,CAAsB,CACpB,GAAIC,QAAQ,GAAKC,iBAAjB,CAAoC,CAClCC,oBAAoB,CAACF,QAAD,CAApB,CACD,CACD,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EAAP,CACD,CAED,GAAIC,iBAAiB,EAAID,QAAQ,GAAKC,iBAAtC,CAAyD,CACvDC,oBAAoB,CAAC,IAAD,CAApB,CACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAED,iBAAd,EAAP,CACD,CAED,mBAAO,yBAAGH,QAAH,EAAP,CACD","sourcesContent":["import { useState } from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n// hooks\r\nimport useAuth from '../hooks/useAuth';\r\n// pages\r\nimport Login from '../pages/authentication/Login';\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nAuthGuard.propTypes = {\r\n  children: PropTypes.node\r\n};\r\n\r\nexport default function AuthGuard({ children }) {\r\n  const { isAuthenticated } = useAuth();\r\n  const { pathname } = useLocation();\r\n  const [requestedLocation, setRequestedLocation] = useState(null);\r\n\r\n  if (!isAuthenticated) {\r\n    if (pathname !== requestedLocation) {\r\n      setRequestedLocation(pathname);\r\n    }\r\n    return <Navigate to=\"/auth/login\" />;\r\n  }\r\n\r\n  if (requestedLocation && pathname !== requestedLocation) {\r\n    setRequestedLocation(null);\r\n    return <Navigate to={requestedLocation} />;\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}